webpackJsonp([1],{"+PkX":function(t,i){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNvZGlwb2RpOmRvY25hbWU9Imhvd3RvLXNldHVwLnN2ZyIgdmVyc2lvbj0iMS4xIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIGlua3NjYXBlOnZlcnNpb249IjAuOTEgcjEzNzI1IiB2aWV3Qm94PSIwIDAgMTY2IDczIiB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiPgogPHNvZGlwb2RpOm5hbWVkdmlldyBib3JkZXJjb2xvcj0iIzY2NjY2NiIgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIgZ3VpZGV0b2xlcmFuY2U9IjEwIiBwYWdlY29sb3I9IiNmZmZmZmYiIGdyaWR0b2xlcmFuY2U9IjEwIiBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIiBpbmtzY2FwZTp6b29tPSI0LjEzNTU0MjIiIG9iamVjdHRvbGVyYW5jZT0iMTAiIGJvcmRlcm9wYWNpdHk9IjEiIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9Imc0MzA2IiBpbmtzY2FwZTpjeD0iODMiIGlua3NjYXBlOmN5PSIzNS4wMDE4MzEiIGlua3NjYXBlOndpbmRvdy15PSIyNCIgaW5rc2NhcGU6d2luZG93LXg9IjY1IiBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE4NTUiIHNob3dncmlkPSJmYWxzZSIgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAiIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjEwNTYiLz4KIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsMSkiPgogIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgOS40MDgpIj4KICAgPHJlY3Qgcng9IjMuMDQzIiBoZWlnaHQ9IjUzLjc4IiB3aWR0aD0iNTQiIHk9Ii0uNzk2NCIgeD0iMCIgZmlsbD0iI2ZmZiIvPgogICA8cG9seWdvbiBwb2ludHM9IjguODczIDQ0Ljk0IDIwLjUyIDMxLjY4IDMyLjE2IDQ0Ljk0IiBmaWxsPSIjY2JkMmQ3IiB0cmFuc2Zvcm09Im1hdHJpeCgxLjIgMCAwIDEuMiAtNi4xMDQgLTExLjY2KSIvPgogICA8cG9seWdvbiBwb2ludHM9IjM5LjQ5IDI1LjI1IDU2Ljc5IDQ0Ljk0IDIyLjE4IDQ0Ljk0IiBmaWxsPSIjY2JkMmQ3IiB0cmFuc2Zvcm09Im1hdHJpeCgxLjIgMCAwIDEuMiAtOS44OTcgLTExLjY2KSIvPgogIDwvZz4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTIuOCA5LjQwOCkiPgogICA8cmVjdCByeD0iMy4wNDMiIGhlaWdodD0iNTQiIHdpZHRoPSI1NCIgeT0iLS45MDg0IiB4PSItLjc2MDYiIGZpbGw9IiNmZmYiLz4KICAgPGcgZmlsbD0iI2NiZDJkNyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAuMTQgMTMuMTMpIj4KICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgLjc1NzQpIj4KICAgICA8ZWxsaXBzZSBjeT0iMS43NjciIGN4PSIzLjUzMyIgcng9IjMuNTQ5IiByeT0iMy41MzUiLz4KICAgICA8cmVjdCB5PSItLjAwMDA4MzY5IiB4PSI5LjY2OCIgaGVpZ2h0PSIzLjUzNSIgd2lkdGg9IjMwIi8+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDIyLjQ3KSI+CiAgICAgPGVsbGlwc2UgY3k9IjEuNzY3IiBjeD0iMy41MzMiIHJ4PSIzLjU0OSIgcnk9IjMuNTM1Ii8+CiAgICAgPHJlY3QgeT0iLS4wMDAwMTE3MiIgeD0iOS42NjgiIGhlaWdodD0iMy41MzUiIHdpZHRoPSIzMCIvPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxMS42MSkiPgogICAgIDxlbGxpcHNlIGN5PSIxLjc2NyIgY3g9IjMuNTMzIiByeD0iMy41NDkiIHJ5PSIzLjUzNSIvPgogICAgIDxyZWN0IHk9Ii0uMDAwMDQ3NzAiIHg9IjkuNjY4IiBoZWlnaHQ9IjMuNTM1IiB3aWR0aD0iMzAiLz4KICAgIDwvZz4KICAgPC9nPgogIDwvZz4KICA8ZyBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHRyYW5zZm9ybT0ibWF0cml4KC45NzM3IDAgMCAuOTcwOSAzLjAyMyAuNjI3OCkiIHN0cm9rZT0iIzVhMzM5MiIgc3Ryb2tlLXdpZHRoPSIyLjk2MiI+CiAgIDxyZWN0IGhlaWdodD0iNTguMjUiIHdpZHRoPSI3MC45OSIgeT0iMTMuMjciIHg9IjQ2LjY1IiBmaWxsPSIjZmZjM2I2Ii8+CiAgIDxyZWN0IHJ4PSI0IiBoZWlnaHQ9IjE4LjE4IiB3aWR0aD0iNzAuOTkiIHk9Ii4zMTk1IiB4PSI0Ni42NSIgZmlsbD0iI2ZmODc2ZCIvPgogICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1NyAyOS4yKSIgZmlsbD0iI2ZmODc2ZCI+CiAgICA8cmVjdCBoZWlnaHQ9IjEwLjEiIHdpZHRoPSIxMC4xNCIgeT0iLjQwNjgiIHg9IjM5Ljg1Ii8+CiAgICA8cmVjdCBoZWlnaHQ9IjEwLjEiIHdpZHRoPSIxMC4xNCIgeT0iLjQwNjgiIHg9IjIwLjA3Ii8+CiAgICA8cmVjdCBoZWlnaHQ9IjEwLjEiIHdpZHRoPSIxMC4xNCIgeT0iMjAuNiIgeD0iMjAuMDciLz4KICAgIDxyZWN0IGhlaWdodD0iMTAuMSIgd2lkdGg9IjEwLjE0IiB5PSIyMC42IiB4PSIuODAyOCIvPgogICA8L2c+CiAgPC9nPgogPC9nPgo8L3N2Zz4K"},"5H+N":function(t,i,e){t.exports=e.p+"static/img/cri.ffeecd0.png"},"6Ful":function(t,i){},FCFv:function(t,i){},"J+0/":function(t,i){},NHnr:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("7+uW"),a=e("Dd8w"),n=e.n(a),r=e("NYxO"),o={computed:n()({},Object(r.c)("activity",{activity:"activity",withId:"withId",isAdmin:"isAdmin"}),{activityUrl:function(){return"/activity/"+this.activity.urlId}})},c={render:function(){var t=this.$createElement,i=this._self._c||t;return i("nav",{staticClass:"navbar has-shadow is-fixed-top"},[i("div",{staticClass:"container"},[this._m(0),this._v(" "),i("div",{staticClass:"navbar-menu",attrs:{id:"navMenu"}},[i("div",{staticClass:"navbar-start"},[i("router-link",{staticClass:"navbar-item",attrs:{to:"/help"}},[this._v("\n                  Help\n               ")]),this._v(" "),this._m(1)],1),this._v(" "),i("div",{staticClass:"navbar-end"},[i("router-link",{staticClass:"navbar-item",attrs:{to:"/activity"}},[i("button",{staticClass:"button is-info is-hoverable"},[this._v("\n                     Create a new activity\n                  ")])])],1)])])])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"navbar-brand"},[i("span",{staticClass:"navbar-item",attrs:{id:"peergraders-brand"}},[i("img",{attrs:{src:e("5H+N"),alt:"Peergraders : a peer review tool"}}),this._v("\n                 Peergraders\n             ")]),this._v(" "),i("div",{staticClass:"navbar-burger burger",attrs:{"data-target":"navMenu"}},[i("span"),this._v(" "),i("span"),this._v(" "),i("span")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"navbar-item"},[i("div",{staticClass:"control has-icons-left"},[i("div",{staticClass:"select"},[i("select",[i("option",{attrs:{selected:""}},[this._v("English")]),this._v(" "),i("option",[this._v("Français")])])]),this._v(" "),i("span",{staticClass:"icon is-left"},[i("i",{staticClass:"fas fa-language"})])])])}]};var l={name:"App",components:{"pg-header":e("VU/8")(o,c,!1,function(t){e("kqY+")},"data-v-2c697f52",null).exports},data:function(){return{landing:!0}},beforeRouteEnter:function(t,i,e){console.log("beforeRouteEnter"),console.log("to",t),console.log("from",i)},beforeRouteUpdate:function(t,i,e){console.log("beforeRouteUpdate"),console.log("to",t),console.log("from",i)},mounted:function(){var t=document.querySelector(".burger"),i=document.querySelector("#"+t.dataset.target);t.addEventListener("click",function(){t.classList.toggle("is-active"),i.classList.toggle("is-active")})}},v={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{attrs:{id:"pg-app"}},[i("notifications",{attrs:{group:"notifications"}}),this._v(" "),"/"==this.$route.path?i("pg-header"):this._e(),this._v(" "),i("div",{attrs:{id:"pg-main-container"}},[i("router-view")],1)],1)},staticRenderFns:[]};var d=e("VU/8")(l,v,!1,function(t){e("i4PT")},null,null).exports,u=e("/ocq"),p=e("mtWM"),m=e.n(p),h=e("Xxa5"),g=e.n(h),f=e("exGp"),y=e.n(f),_=e("BO1k"),C=e.n(_),w=e("fZjL"),I=e.n(w),b={data:function(){return{password:"",errorMessage:""}},methods:n()({},Object(r.b)("activity",{getAuthActivity:"getAuthActivity"}),{checkPassword:function(){var t=this;console.log("passed pwd"),console.log(this.password),console.log("passed urlId",this.$store.state.activity.activity.urlId),this.getAuthActivity({urlId:this.$store.state.activity.activity.urlId,pwd:this.password}).then(function(i){console.log("here",i),i.granted?t.$notify({group:"notifications",title:"Access granted",type:"success"}):t.$notify({group:"notifications",title:"Access not granted",type:"error"})})}})},k={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{},[e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Password")]),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"text",placeholder:"Text input"},domProps:{value:t.password},on:{input:function(i){i.target.composing||(t.password=i.target.value)}}})]),t._v(" "),""!=t.errorMessage?e("p",{staticClass:"help is-error"},[t._v(t._s(t.errorMessage))]):t._e()]),t._v(" "),e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[e("button",{staticClass:"button is-link",on:{click:t.checkPassword}},[t._v("Submit")])])])])])},staticRenderFns:[]};var A=e("VU/8")(b,k,!1,function(t){e("p6R5")},null,null).exports,S=e("28+M"),P={name:"ActivityRead",data:function(){return{showInvite:!0,manage:!1,tab:"link",invitationRecipients:[],invitationMessage:""}},components:{"pwd-activity":A,"input-tag":e.n(S).a},computed:n()({},Object(r.c)("activity",{activity:"activity"}),{activityLink:function(){return"https://peergraders.herokuapp.com/#/activity/"+this.activity.urlId}}),methods:n()({invite:function(){var t=this;console.log("biatch"),this.sendInvitations({activity:this.activity,destinators:this.invitationRecipients,message:this.invitationMessage}).then(function(){console.log("wtf"),t.$notify({group:"notifications",title:"Invitations sent !",text:"Invitations have been sent. In case you did not get it.",type:"success"})})},openInvite:function(){this.showInvite=!0},copyToClipboard:function(t){var i=document.createElement("textarea");i.value=t,i.setAttribute("readonly",""),i.style.position="absolute",i.style.left="-9999px",document.body.appendChild(i);var e=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);i.select(),document.execCommand("copy"),document.body.removeChild(i),e&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(e))},closeInvite:function(){this.showInvite=!1},tabswitch:function(t){var i=t.target.getAttribute("data-tab");this.tab=i},noRedoNoFuckNo:function(){var t=document.getElementById("mainContainer"),i=document.getElementById("action-bar"),e=parseInt(window.getComputedStyle(t,null).getPropertyValue("padding"));parseInt(window.getComputedStyle(t,null).getPropertyValue("width"));i.style.position="relative",i.style.width="calc(100% + "+2*e+"px)",i.style.left=-e+"px",i.style.top=-e+"px"},displayParticipant:function(t){var i=["name","group","role","token","reviewed","email","_id"],e=I()(t).filter(function(t){return!i.includes(t)}),s=[],a=!0,n=!1,r=void 0;try{for(var o,c=C()(e);!(a=(o=c.next()).done);a=!0){var l=o.value;s.push(t[l])}}catch(t){n=!0,r=t}finally{try{!a&&c.return&&c.return()}finally{if(n)throw r}}return t.group+" "+t.role+" "+t.name+" "+s.join(" ")},manageActivity:function(){this.manage=!0}},Object(r.b)("activity",{lookForActivity:"lookForActivity",sendInvitations:"sendInvitations"})),update:function(){this.noRedoNoFuckNo()},mounted:function(){var t=this;return y()(g.a.mark(function i(){return g.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("mounted"),i.next=3,t.lookForActivity(t.$router.history.current.params.id);case 3:t.invitationRecipients=t.activity.participants.reduce(function(t,i){return t.push(i.email),t},[]),t.noRedoNoFuckNo();case 5:case"end":return i.stop()}},i,t)}))()}},x={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"action-bar"}},[e("div",{staticClass:"action-activity level"},[e("a",{staticClass:"button is-small",on:{click:t.manageActivity}},[t._m(0),t._v(" "),e("span",[t._v("Modify")])]),t._v(" "),e("a",{staticClass:"button is-small",on:{click:t.openInvite}},[t._m(1),t._v(" "),e("span",[t._v("Send invitations")])])]),t._v(" "),t.showInvite?e("div",{attrs:{id:"manage-message"}},[e("article",{staticClass:"message is-danger"},[e("div",{staticClass:"message-header"},[e("p",[t._v("Invite participants via")]),t._v(" "),e("button",{staticClass:"delete",attrs:{"aria-label":"delete"},on:{click:t.closeInvite}})]),t._v(" "),e("div",{staticClass:"message-body"},[e("div",{staticClass:"tabs"},[e("ul",[e("li",{class:{"is-active":"link"==t.tab,"":"email"==t.tab},on:{click:t.tabswitch}},[e("a",{staticClass:"button",attrs:{"data-tab":"link"}},[t._v("Link")])]),t._v(" "),e("li",{class:{"is-active":"email"==t.tab,"":"link"==t.tab},on:{click:t.tabswitch}},[e("a",{staticClass:"button",attrs:{"data-tab":"email"}},[t._v("Email")])])])]),t._v(" "),e("div",{attrs:{id:"tab-content"}},[e("div",{class:{"is-active":"link"==t.tab,"":"email"==t.tab},attrs:{"data-content":"link"}},[t._m(2),t._v(" "),e("div",{staticClass:"field has-addons"},[e("div",{staticClass:"input-link control"},[e("input",{staticClass:"input",attrs:{type:"text",id:"link-activity",disabled:"disabled"},domProps:{value:t.activityLink}})]),t._v(" "),e("div",{staticClass:"control"},[e("a",{staticClass:"button is-ligth",on:{click:function(i){t.copyToClipboard(t.activityLink)}}},[t._v("\n\t\t\t\t\t\t      Copy\n\t\t\t\t\t\t    ")])])])]),t._v(" "),e("div",{class:{"is-active":"email"==t.tab,"":"link"==t.tab},attrs:{"data-content":"email"}},[e("div",{attrs:{id:"tab-invite-content"}},[e("input-tag",{staticClass:"input invite pg-mailtag",attrs:{placeholder:"Emails",tags:t.invitationRecipients,validation:"email"},on:{"update:tags":function(i){t.invitationRecipients=i}}}),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.invitationMessage,expression:"invitationMessage"}],staticClass:"textarea invite",attrs:{id:"textarea",placeholder:"Message"},domProps:{value:t.invitationMessage},on:{input:function(i){i.target.composing||(t.invitationMessage=i.target.value)}}}),t._v(" "),t.invitationRecipients.length>0?e("a",{staticClass:"button invite"},[t._m(3),t._v(" "),e("span",{on:{click:t.invite}},[t._v("Send")])]):e("a",{staticClass:"button invite",attrs:{disabled:"disabled"}},[t._m(4),t._v(" "),e("span",[t._v("Send")])])],1)])])])])]):t._e(),t._v(" "),t.manage?e("pwd-activity"):t._e(),t._v(" "),e("div",{staticClass:"pg-activity"},[e("div",{staticClass:"pg-activity-content"},[e("div",{staticClass:"pg-level"},[t._m(5),t._v(" "),e("h1",{staticClass:"title pg-cell resume"},[t._v(t._s(t.activity.title))])]),t._v(" "),e("div",{staticClass:"pg-level"},[t._m(6),t._v(" "),e("p",{staticClass:"pg-cell resume"},[t._v(t._s(t.activity.guidelines))])]),t._v(" "),e("div",{staticClass:"pg-level"},[t._m(7),t._v(" "),e("p",{staticClass:"pg-cell resume-number"},[t._v(t._s(t.activity.sessions))])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("span",{staticClass:"icon is-medium"},[i("i",{staticClass:"fas fa-edit"})])},function(){var t=this.$createElement,i=this._self._c||t;return i("span",{staticClass:"icon is-medium"},[i("i",{staticClass:"fas fa-share-square"})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"link-div"},[i("p",[this._v("Why are we sharing by link ? I don't know. Tell us !")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fas fa-envelope"})])},function(){var t=this.$createElement,i=this._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fas fa-envelope"})])},function(){var t=this.$createElement,i=this._self._c||t;return i("span",{staticClass:"pg-cell icon is-medium"},[i("i",{staticClass:"fas fa-pencil-alt"})])},function(){var t=this.$createElement,i=this._self._c||t;return i("span",{staticClass:"pg-cell icon is-medium"},[i("i",{staticClass:"fas fa-chalkboard-teacher"})])},function(){var t=this.$createElement,i=this._self._c||t;return i("span",{staticClass:"pg-cell icon is-medium"},[i("i",{staticClass:"fas fa-stopwatch"})])}]};var R=e("VU/8")(P,x,!1,function(t){e("FCFv")},"data-v-54a39522",null).exports,N={name:"ActivityParticipants",data:function(){return{csvInsertion:"",participantRoute:!1,check:!1}},computed:n()({},Object(r.c)("activity",{activity:"activity"}),Object(r.c)("participants",{errors:"errors"})),methods:n()({isNotDynamicKey:function(t){return"token"!=t&&"email"!=t&&"_id"!=t&&"group"!=t&&"role"!=t&&"reviewed"!=t},isRowError:function(t){return this.errors.find(function(i){return i.line-1==t||i.lineDuplicate-1==t})},isCSVError:function(){return this.errors.find(function(t){return 0==t.line})},getRowError:function(t){var i=this.errors[this.errors.findIndex(function(i){return i.line-1==t||i.lineDuplicate-1==t})];return i?i.message:""},isThereDuplicate:function(){this.setErrors([]);for(var t=this.activity.participants.map(function(t){return t.email}),i=0,e=-1;i<t.length;i++)(e=t.indexOf(t[i],i+1))>-1&&this.errors.push({line:i+1,lineDuplicate:e+1,message:"Duplicate email line "+i+" on line "+e+".",type:"error"})},convertCSV:function(){if(this.setErrors([]),""!=document.getElementById("textarea").value){for(var t=document.getElementById("textarea").value.split("\n"),i=[],e=[],s=0,a=0,n=[];s<t.length;s++)if(0==s){i=(n=t[s].split(",").map(function(t){return t.trim()})).filter(function(t){return"_id"!=t}),a=n.length;for(var r=0;r<n.length;r++){n.indexOf(n[r],r+1)>1&&this.errors.push({type:"warning",message:"Header contains duplicate field. Last value will count."})}n.find(function(t){return"email"==t})&&n.find(function(t){return"group"==t})&&n.find(function(t){return"role"==t})||this.errors.push({line:s})}else t[s].split(",").length==a?e.push(t[s].split(",")):this.errors.push({type:"error",message:"The line "+s+" is not matching the format set in header.",line:s});if(0==this.errors.length){for(s=0;s<e.length;s++){var o=e[s];this.activity.participants.length-1<s&&this.addParticipant(s);for(r=0;r<o.length;r++){if("role"==i[r]){var c=o[r];o[r]=c.charAt(0).toUpperCase()+c.slice(1)}this.activity.participants[s][i[r]]=o[r]}}this.isThereDuplicate(),this.check=!0}}}},Object(r.b)("participants",{getParticipants:"getParticipants",setParticipants:"setParticipants",setActivityId:"setActivityId",setActivityUrlId:"setActivityUrlId"}),Object(r.b)("activity",{setActivity:"setActivity"}),Object(r.b)("participants",{setErrors:"setErrors"}),{postActivity:function(){console.log("launch save"),0==this.errors.length&&this.setActivity(this.activity)},addParticipant:function(t){this.activity.participants.splice(t+1,0,{name:"",group:"",email:"",role:"",reviewed:[]}),this.isThereDuplicate()},removeParticipant:function(t){this.activity.participants.length>1&&this.activity.participants.splice(t,1),this.isThereDuplicate()}}),beforeRouteEnter:function(t,i,e){e(function(t){console.log("in there"),t.participantRoute=!0})}},j={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[t.participantRoute?e("a",{staticClass:"button level-item",on:{click:t.postActivity}},[e("span",[t._v("Update")])]):t._e(),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"field participants-label"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.csvInsertion,expression:"csvInsertion"}],staticClass:"textarea",attrs:{id:"textarea",placeholder:"Textarea"},domProps:{value:t.csvInsertion},on:{blur:t.convertCSV,input:function(i){i.target.composing||(t.csvInsertion=i.target.value)}}})]),t._v(" "),t.isCSVError()?e("div",[e("p",{staticStyle:{color:"red"}},[t._v("The field does not contain the minimum required field (email,group,role).")])]):t._e(),t._v(" "),t._m(1),t._v(" "),t._l(t.activity.participants,function(i,s){return e("div",{staticClass:"row-participant"},[e("div",{staticClass:"tooltip",class:{"error-flag":t.isRowError(s),"no-error":!t.isRowError(s)}},[t._v("\n\t\t\t \n\t\t\t"),e("div",{staticClass:"tooltip-text"},[t._v(t._s(t.getRowError(s)||"Line is ok"))])]),t._v(" "),t._l(Object.keys(i),function(s){return e("div",{},[t.isNotDynamicKey(s)?e("div",{staticClass:"field"},[e("input",{directives:[{name:"model",rawName:"v-model",value:i[s],expression:"participant[key]"}],staticClass:"input",attrs:{type:"text",placeholder:s},domProps:{value:i[s]},on:{input:function(e){e.target.composing||t.$set(i,s,e.target.value)}}})]):t._e()])}),t._v(" "),e("div",{},[e("div",{},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.email,expression:"participant.email"}],staticClass:"input",attrs:{type:"email",placeholder:"email"},domProps:{value:i.email},on:{input:function(e){e.target.composing||t.$set(i,"email",e.target.value)}}})])]),t._v(" "),e("div",{},[e("div",{},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.group,expression:"participant.group"}],staticClass:"input",attrs:{type:"text",placeholder:"group"},domProps:{value:i.group},on:{input:function(e){e.target.composing||t.$set(i,"group",e.target.value)}}})])]),t._v(" "),e("div",{},[e("div",{},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:i.role,expression:"participant.role"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(i,"role",e.target.multiple?s:s[0])}}},[e("option",{attrs:{disabled:"",value:""}},[t._v("role")]),t._v(" "),e("option",[t._v("Student")]),t._v(" "),e("option",[t._v("Observator")]),t._v(" "),e("option",[t._v("Teacher")])])])])]),t._v(" "),e("div",{staticClass:"add-participant",on:{click:function(i){t.addParticipant(s)}}},[e("i",{staticClass:"far fa-plus-square"})]),t._v(" "),e("div",{staticClass:"remove-participant",on:{click:function(i){t.removeParticipant(s)}}},[e("i",{staticClass:"far fa-minus-square"})])],2)})],2)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"level participants-label"},[i("label",{staticClass:"label"},[this._v("CSV Insertion")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"level participants-label"},[i("label",{staticClass:"label"},[this._v("Participants")])])}]};var M=e("VU/8")(N,j,!1,function(t){e("J+0/")},"data-v-48fcd067",null).exports,E={name:"ActivityHeader",computed:n()({},Object(r.c)("activity",{withId:"withId"}))},D={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{attrs:{id:"header"}},[i("nav",{staticClass:"navbar"},[i("div",{staticClass:"container"},[this._m(0),this._v(" "),i("div",{staticClass:"navbar-menu",attrs:{id:"navMenu"}},[this._m(1),this._v(" "),i("div",{staticClass:"navbar-end"},[this.withId?i("router-link",{staticClass:"navbar-item",attrs:{to:"/activity"}},[i("button",{staticClass:"button is-info is-hoverable"},[this._v("\n                        Create a new activity\n                     ")])]):this._e()],1)])])])])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"navbar-brand"},[i("span",{staticClass:"navbar-item",attrs:{id:"peergraders-brand"}},[i("img",{attrs:{src:e("5H+N"),alt:"Peergraders : a peer review tool"}}),this._v("\n                    Peergraders\n                ")]),this._v(" "),i("div",{staticClass:"navbar-burger burger",attrs:{"data-target":"navMenu"}},[i("span"),this._v(" "),i("span"),this._v(" "),i("span")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"navbar-start"},[i("div",{staticClass:"navbar-item"},[i("div",{staticClass:"control has-icons-left"},[i("div",{staticClass:"select"},[i("select",[i("option",{attrs:{selected:""}},[this._v("English")]),this._v(" "),i("option",[this._v("Français")])])]),this._v(" "),i("span",{staticClass:"icon is-left"},[i("i",{staticClass:"fas fa-language"})])])])])}]};var Z={name:"Activity",components:{"activity-header":e("VU/8")(E,D,!1,function(t){e("fkCV")},"data-v-3b363a94",null).exports,"read-activity":R,"participants-acitivity":M},data:function(){return{showStep:1,showModal:!1,modalInfo:{activityPath:"",activityPassword:""},APP_URL:""}},computed:n()({},Object(r.c)("activity",{activity:"activity",withId:"withId",isAdmin:"isAdmin"}),Object(r.c)("participants",{errors:"errors"}),{checkFirstStepCompletion:function(){return this.activity.title&&this.activity.guidelines&&this.activity.sessions}}),methods:n()({},Object(r.b)("activity",{setActivity:"setActivity",resetActivitySession:"resetActivitySession",getAuthActivity:"getAuthActivity",setWithId:"setWithId",lookForActivity:"lookForActivity",deleteActivity:"deleteActivity"}),Object(r.b)("participants",{setErrors:"setErrors"}),{delActivity:function(){this.deleteActivity(this.activity.urlId)},postActivity:function(){var t=this;if(console.log("launch save"),0==this.errors.length){var i=this;this.setActivity(this.activity).then(function(e){e.teacherPwd&&(i.modalInfo.activityPath="https://peergraders.herokuapp.com/#/activity/"+t.activity.urlId,i.modalInfo.activityPassword=e.teacherPwd,i.showModal=!0)})}},goStep:function(t){this.showStep>=0&&this.checkFirstStepCompletion&&0==this.errors.length&&(this.showStep+=t)},redirect:function(){this.$router.push({path:"/activity/"+this.activity.urlId})}}),beforeRouteUpdate:function(t,i,e){console.log("beforeRouteUpdate"),this.showStep=1,this.showModal=!1,t.params.id?(this.setWithId(!0),this.lookForActivity(t.params.id)):(console.log("here in update"),this.resetActivitySession(),t.query.title&&(this.activity.title=t.query.title),this.setErrors([]),console.log("reset ?")),e()},beforeRouteEnter:function(t,i,e){console.log("to then from"),console.log(t),console.log(i),t.params.id?e(function(i){i.showModal=!1,i.setWithId(!0),i.lookForActivity(t.params.id)}):(console.log("here in route"),e(function(i){i.showModal=!1,console.log("before reset"),i.resetActivitySession(),t.query.title&&(i.activity.title=t.query.title),i.setErrors([]),console.log("after reset, has it reset")}))}},L={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"pg-container"},[e("activity-header"),t._v(" "),e("div",{staticClass:"main-container column",attrs:{id:"mainContainer"}},[t.withId&&!t.isAdmin?e("div",[e("read-activity")],1):e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:1===t.showStep,expression:"showStep === 1 "}]},[t._m(0),t._v(" "),t._m(1),t._v(" "),e("div",{staticClass:"form"},[e("div",{staticClass:"form-content"},[e("div",{staticClass:"field is-horizontal"},[t._m(2),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.activity.title,expression:"activity.title"}],staticClass:"input",attrs:{type:"text",placeholder:"Activity's title"},domProps:{value:t.activity.title},on:{input:function(i){i.target.composing||t.$set(t.activity,"title",i.target.value)}}})])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[t._m(3),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.activity.guidelines,expression:"activity.guidelines"}],staticClass:"textarea",attrs:{placeholder:"Activity's guidelines"},domProps:{value:t.activity.guidelines},on:{input:function(i){i.target.composing||t.$set(t.activity,"guidelines",i.target.value)}}})])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[t._m(4),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.activity.sessions,expression:"activity.sessions"}],staticClass:"input",attrs:{type:"number",placeholder:"How many sessions will there be ?"},domProps:{value:t.activity.sessions},on:{input:function(i){i.target.composing||t.$set(t.activity,"sessions",i.target.value)}}})])])])])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:2===t.showStep,expression:"showStep === 2 "}]},[t._m(5),t._v(" "),t._m(6),t._v(" "),e("participants-acitivity")],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:3===t.showStep,expression:"showStep === 3 "}]},[t._m(7),t._v(" "),t._m(8),t._v(" "),e("div",{staticClass:"nameonit"},[e("div",{staticClass:"field is-horizontal"},[t._m(9),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"control step3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.activity.teacherName,expression:"activity.teacherName"}],staticClass:"input",attrs:{type:"text",placeholder:"Your name"},domProps:{value:t.activity.teacherName},on:{input:function(i){i.target.composing||t.$set(t.activity,"teacherName",i.target.value)}}})])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[t._m(10),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"control step3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.activity.teacherEmail,expression:"activity.teacherEmail"}],staticClass:"input",attrs:{type:"email",placeholder:"Email input"},domProps:{value:t.activity.teacherEmail},on:{input:function(i){i.target.composing||t.$set(t.activity,"teacherEmail",i.target.value)}}})])])])])]),t._v(" "),e("div",{staticClass:"modal",class:{"is-active":t.showModal}},[e("div",{staticClass:"modal-background"}),t._v(" "),e("div",{staticClass:"modal-content"},[e("p",[t._v("Activity : "+t._s(t.modalInfo.activityPath))]),t._v(" "),e("p",[t._v("Password : "+t._s(t.modalInfo.activityPassword))]),t._v(" "),e("button",{staticClass:"button",on:{click:t.redirect}},[t._v("Alright")])]),t._v(" "),e("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:t.redirect}})])])]),t._v(" "),e("div",{attrs:{id:"stepper-container"}},[e("div",{attrs:{id:"stepper"}},[e("p",{staticClass:"level-right"},[t.showStep>1&&(!t.withId||t.isAdmin)?e("a",{staticClass:"button level-item",on:{click:function(i){t.goStep(-1)}}},[t._v("\n\t\t\t\t\t\t<\n\t\t\t\t\t")]):t._e(),t._v(" "),t.showStep<3&&(!t.withId||t.isAdmin)?e("a",{staticClass:"button level-item",class:{"is-primary":t.checkFirstStepCompletion},attrs:{disabled:!t.checkFirstStepCompletion},on:{click:function(i){t.goStep(1)}}},[t._v("\n\t\t\t\t\t\tContinue\n\t\t\t\t\t")]):t._e(),t._v(" "),3==t.showStep?e("a",{staticClass:"button is-primary level-item",on:{click:t.postActivity}},[void 0!=t.activity.urlId?e("span",[t._v("Update")]):e("span",[t._v("Save")])]):t._e(),t._v(" "),void 0!=t.activity.urlId&&t.isAdmin?e("a",{staticClass:"button is-danger level-item",on:{click:t.delActivity}},[t._v("\n\t\t\t\t\t\tDelete\n\t\t\t\t\t")]):t._e()])])])],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"level"},[i("div",{staticClass:"level-item"},[i("h2",[this._v("Step 1 of 4")])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"level"},[i("div",{staticClass:"level-item"},[i("h1",[this._v("What is the activity ?")])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"icon-label is-normal"},[i("label",{staticClass:"label"},[i("span",{staticClass:"icon is-large is-left"},[i("i",{staticClass:"fas fa-pencil-alt"})])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"icon-label is-normal"},[i("label",{staticClass:"label"},[i("span",{staticClass:"icon is-large is-left"},[i("i",{staticClass:"fas fa-chalkboard-teacher"})])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"icon-label is-normal"},[i("label",{staticClass:"label"},[i("span",{staticClass:"icon is-large is-left"},[i("i",{staticClass:"fas fa-stopwatch"})])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"level"},[i("div",{staticClass:"level-item"},[i("h2",[this._v("Step 2 of 4")])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"level"},[i("div",{staticClass:"level-item"},[i("h1",[this._v("Who is involve ?")])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"level"},[i("div",{staticClass:"level-item"},[i("h2",[this._v("Step 3 of 4")])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"level"},[i("div",{staticClass:"level-item"},[i("h1",[this._v("Who are you ?")])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"icon-label is-normal"},[i("label",{staticClass:"label"},[i("span",{staticClass:"icon is-large is-left"},[i("i",{staticClass:"fas fa-id-card-alt"})])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"icon-label is-normal"},[i("label",{staticClass:"label"},[i("span",{staticClass:"icon is-large is-left"},[i("i",{staticClass:"fas fa-envelope"})])])])}]};var H=e("VU/8")(Z,L,!1,function(t){e("gILf")},"data-v-3a089d6a",null).exports,z={data:function(){return{errorMessage:"",activityKey:""}},computed:n()({},Object(r.c)("activity",{userSession:"userSession"})),methods:n()({},Object(r.b)("activity",{resetActivitySession:"resetActivitySession",lookForActivity:"lookForActivity"}),{findActivity:function(){var t=this;console.log("looking for"),console.log(this.activityKey),this.lookForActivity(this.activityKey).then(function(i){t.$router.push({path:"/activity/"+i.url})}).catch(function(i){t.errorMessage=i})}}),beforeRouteEnter:function(t,i,e){e(function(t){t.resetActivitySession()})}},F={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"content-pg"},[e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Activity's Id")]),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.activityKey,expression:"activityKey"}],staticClass:"input",attrs:{type:"text",placeholder:"Text input"},domProps:{value:t.activityKey},on:{input:function(i){i.target.composing||(t.activityKey=i.target.value)}}})]),t._v(" "),""!=t.errorMessage?e("p",{staticClass:"help is-error"},[t._v(t._s(t.errorMessage))]):t._e()]),t._v(" "),e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[e("button",{staticClass:"button is-link",on:{click:t.findActivity}},[t._v("Submit")])])])])},staticRenderFns:[]};var W=e("VU/8")(z,F,!1,function(t){e("uySj")},null,null).exports,$={name:"activityPlanning",data:function(){return{}},computed:n()({},Object(r.c)("activity",{activity:"activity",shifts:"shifts"})),methods:n()({},Object(r.b)("activity",{lookForActivity:"lookForActivity",getPlanning:"getPlanning"})),beforeRouteEnter:function(t,i,e){e(function(i){i.lookForActivity(t.params.id)})}},T={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("button",{on:{click:function(i){t.getPlanning()}}},[t._v("get planning")]),t._v(" "),e("table",{staticClass:"table"},[e("thead",[e("tr",[e("td",{attrs:{colspan:"2"}}),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:t.shifts.length}},[t._v("Shifts")])]),t._v(" "),e("tr",[e("td",[t._v("groupe")]),e("td",[t._v("étudiant")]),t._v(" "),t._l(t.shifts,function(i,s){return e("td",{key:s+t.shifts[s]},[t._v("#"+t._s(s+1))])})],2)]),t._v(" "),e("tbody",t._l(t.activity.participants,function(i){return e("tr",[e("td",[t._v(t._s(i.group))]),t._v(" "),e("td",[t._v(t._s(i.email))]),t._v(" "),t._l(i.reviewed,function(i,s){return e("td",[t._v(t._s(i.group))])})],2)}))])])},staticRenderFns:[]};var U=e("VU/8")($,T,!1,function(t){e("u3z8")},"data-v-3d346c94",null).exports,O={name:"ActivityRubric",data:function(){return{}},methods:n()({},Object(r.b)("activity",{setActivity:"setActivity"}),{check:function(){return this.activity.rubrics.every(function(t){return Number(t.points)===t.descriptors.reduce(function(t,i){return t+Number(i.points)},0)})},changeLevel:function(t,i){this.activity.rubrics[t].descriptors.sort(function(t,i){return t.level-i.level})},postActivity:function(){console.log("launch save rubric"),this.check()?this.setActivity(this.activity):this.$notify({group:"notifications",type:"error",title:"Points skill incoherence"})},addSkill:function(t){this.activity.rubrics.splice(t+1,0,{name:"",points:0,descriptors:[{content:"",points:0,level:""}]})},removeSkill:function(t){this.activity.rubrics.length>1&&this.activity.rubrics.splice(t,1)},addDescriptor:function(t,i){this.activity.rubrics[t].descriptors.splice(i+1,0,{content:"",points:0,level:""})},removeDescriptor:function(t,i){this.activity.rubrics[t].descriptors.length>1&&this.activity.rubrics[t].descriptors.splice(i,1)}}),components:{"pwd-activity":A},computed:n()({},Object(r.c)("activity",{activity:"activity",isAdmin:"isAdmin"}))},Y={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[t.isAdmin?e("div",[e("a",{staticClass:"button level-item",on:{click:t.postActivity}},[e("span",[t._v("Save")])]),t._v(" "),e("div",{staticClass:"level"},[e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Basis")]),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.activity.basis,expression:"activity.basis"}],staticClass:"input",attrs:{type:"number",placeholder:"Activity's basis"},domProps:{value:t.activity.basis},on:{input:function(i){i.target.composing||t.$set(t.activity,"basis",i.target.value)}}})])])]),t._v(" "),t._l(t.activity.rubrics,function(i,s){return e("div",{key:s},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("div",{staticClass:"field has-addons"},[t._m(0,!0),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.name,expression:"rubric.name"}],staticClass:"input",attrs:{type:"text",placeholder:"Skill's name"},domProps:{value:i.name},on:{input:function(e){e.target.composing||t.$set(i,"name",e.target.value)}}})])])]),t._v(" "),e("div",{staticClass:"column"},[e("div",{staticClass:"field has-addons"},[t._m(1,!0),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.points,expression:"rubric.points"}],staticClass:"input",attrs:{type:"number",placeholder:"Skill's points"},domProps:{value:i.points},on:{input:function(e){e.target.composing||t.$set(i,"points",e.target.value)}}})])])]),t._v(" "),e("div",{staticClass:"column"},[e("div",{staticClass:"add-skill",on:{click:function(i){t.addSkill(s)}}},[e("i",{staticClass:"far fa-plus-square"})]),t._v(" "),e("div",{staticClass:"remove-skill",on:{click:function(i){t.removeSkill(s)}}},[e("i",{staticClass:"far fa-minus-square"})])])]),t._v(" "),e("section",{staticClass:"hero is-light"},[e("div",{staticClass:"hero-body"},t._l(i.descriptors,function(i,a){return e("div",{key:a,staticClass:"columns"},[e("div",{staticClass:"column"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:i.content,expression:"descriptor.content"}],staticClass:"textarea",attrs:{placeholder:"Descriptor's description"},domProps:{value:i.content},on:{input:function(e){e.target.composing||t.$set(i,"content",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"column"},[e("div",{staticClass:"field"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:i.level,expression:"descriptor.level"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(i,"level",e.target.multiple?s:s[0])},function(i){t.changeLevel(s,a)}]}},[e("option",{attrs:{disabled:"",value:""}},[t._v("Level")]),t._v(" "),e("option",{domProps:{value:1}},[t._v("Easy")]),t._v(" "),e("option",{domProps:{value:2}},[t._v("Medium")]),t._v(" "),e("option",{domProps:{value:3}},[t._v("Hard")]),t._v(" "),e("option",{domProps:{value:4}},[t._v("Expert")])])])])]),t._v(" "),e("div",{staticClass:"column"},[e("div",{staticClass:"field has-addons"},[t._m(2,!0),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.points,expression:"descriptor.points"}],staticClass:"input",attrs:{type:"number",placeholder:"descriptor's point"},domProps:{value:i.points},on:{input:function(e){e.target.composing||t.$set(i,"points",e.target.value)}}})])])]),t._v(" "),e("div",{staticClass:"column"},[e("div",{staticClass:"add-descriptor",on:{click:function(i){t.addDescriptor(s,a)}}},[e("i",{staticClass:"far fa-plus-square"})]),t._v(" "),e("div",{staticClass:"remove-descriptor",on:{click:function(i){t.removeDescriptor(s,a)}}},[e("i",{staticClass:"far fa-minus-square"})])])])}))])])})],2):e("pwd-activity")],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"control"},[i("a",{staticClass:"button is-info"},[this._v("\n\t\t\t\t\t      Skill\n\t\t\t\t\t    ")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"control"},[i("a",{staticClass:"button is-info"},[this._v("\n\t\t\t\t\t      Total points\n\t\t\t\t\t    ")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"control"},[i("a",{staticClass:"button is-info"},[this._v("\n\t\t\t\t\t\t\t      Points\n\t\t\t\t\t\t\t    ")])])}]};var B=e("VU/8")(O,Y,!1,function(t){e("ejvi")},null,null).exports,G=e("c/Tr"),V=e.n(G),q={name:"Review",data:function(){return{emailParticipant:"",isReviewStarted:!1,indexReviewed:0,grader:{}}},computed:n()({},Object(r.c)("activity",{activity:"activity"}),Object(r.c)("review",{review:"review",hasReview:"hasReview"}),{displayRedirection:function(){return 1==this.activity.rubrics.length&&""==this.activity.rubrics[0].name&&0==this.activity.rubrics[0].points&&1==this.activity.rubrics[0].descriptors.length&&0==this.activity.rubrics[0].descriptors[0].content&&0==this.activity.rubrics[0].descriptors[0].points},isThereNextReviewed:function(){var t=this;return!!this.review.grader.reviewed&&this.indexReviewed>=this.review.grader.reviewed.filter(function(i){return i.group!=t.review.grader.group}).length-1}}),methods:n()({},Object(r.b)("activity",{lookForActivity:"lookForActivity",setActivity:"setActivity",getPlanning:"getPlanning"}),Object(r.b)("review",{setReview:"setReview",setHasPushedSave:"setHasPushedSave",lookForReview:"lookForReview",lookForReviewFromParticipant:"lookForReviewFromParticipant",setShowNotificationSave:"setShowNotificationSave"}),{getGrader:function(t,i){return t.find(function(t){return t.token==i||t.email==i})},saveReviewsBeforeHand:function(t,i){var e=this.getGrader(t.participants,i||this.emailParticipant),s=this;this.getPlanning().then(function(){var t=!0,i=!1,a=void 0;try{for(var n,r=C()(e.reviewed);!(t=(n=r.next()).done);t=!0){n.value;s.grader=e,s.setHasPushedSave(!0),s.setShowNotificationSave(!1),s.postReview()}}catch(t){i=!0,a=t}finally{try{!t&&r.return&&r.return()}finally{if(i)throw a}}})},startReview:function(t,i){var e=this;return y()(g.a.mark(function s(){var a;return g.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(a=e.getGrader(t.participants,i||e.emailParticipant))){s.next=7;break}return s.next=4,e.lookForReviewFromParticipant({activityUrlId:t.urlId,grader:{email:a.email}}).then(function(){e.grader=e.review.grader,e.isReviewStarted=!0});case 4:e.hasReview||(e.saveReviewsBeforeHand(e.activity,e.emailParticipant),e.emailParticipant=a.email,e.setReview(e.getNewReview(t,a)),e.grader=a,e.isReviewStarted=!0),s.next=8;break;case 7:e.$notify({group:"notifications",type:"error",title:"wrong credentials"});case 8:case"end":return s.stop()}},s,e)}))()},showReview:function(t){this.indexReviewed=t>this.review.grader.reviewed.length?this.review.grader.reviewed.length:t},getNewReview:function(t,i){var e=this.getEmptySkillTable(t.rubrics);i.reviewed=V()(i.reviewed.filter(function(t){return t.group!=i.group}));var s=!0,a=!1,n=void 0;try{for(var r,o=C()(i.reviewed);!(s=(r=o.next()).done);s=!0){r.value.skills=V()(e)}}catch(t){a=!0,n=t}finally{try{!s&&o.return&&o.return()}finally{if(a)throw n}}return{grader:i,activityUrlId:t.urlId}},getEmptySkillTable:function(t){for(var i=new Array(t.length),e=0;e<t.length;e++){i[e]={rubricId:t[e]._id,name:t[e].name,totalPossiblePoints:t[e].points,skillDescriptors:new Array(t[e].descriptors.length)};for(var s=0;s<t[e].descriptors.length;s++)i[e].skillDescriptors[s]={content:t[e].descriptors[s].content,descriptorId:t[e].descriptors[s]._id,possiblePoints:t[e].descriptors[s].points,acquired:!1}}return i},postReview:function(){var t=this;this.setHasPushedSave(!0),this.review.urlId?(this.review.grader=this.grader,this.setReview(this.review)):this.setReview({grader:this.grader,activityUrlId:this.review.activityUrlId}).then(function(){t.grader=t.review.grader})}}),beforeRouteEnter:function(t,i,e){var s,a=this;console.log("beforeRouteEnter"),e((s=y()(g.a.mark(function i(e){return g.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.lookForActivity(t.params.id);case 2:if(!t.params.reviewId){i.next=7;break}return i.next=5,e.lookForReview({activityUrlId:t.params.id,urlId:t.params.reviewId}).then(function(){e.grader=e.review.grader,console.log("here",e.review.grader),console.log("here",e.grader),e.emailParticipant=e.review.grader.email,e.isReviewStarted=!0});case 5:i.next=8;break;case 7:t.query.ptoken&&(e.saveReviewsBeforeHand(e.activity,t.query.ptoken),e.startReview(e.activity,t.query.ptoken));case 8:case"end":return i.stop()}},i,a)})),function(t){return s.apply(this,arguments)}))},beforeRouteUpdate:function(t,i,e){var s=this;return y()(g.a.mark(function i(){return g.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(console.log("beforeRouteUpdate"),!t.params.reviewId){i.next=8;break}return i.next=4,s.lookForActivity(t.params.id);case 4:return i.next=6,s.lookForReview({activityUrlId:t.params.id,urlId:t.params.reviewId}).then(function(){s.grader=s.review.grader,console.log("theree ",s.grader),console.log("there",s.review.grader),s.emailParticipant=s.review.grader.email,s.isReviewStarted=!0});case 6:i.next=9;break;case 8:s.lookForActivity(t.params.id);case 9:case"end":return i.stop()}},i,s)}))()}},Q={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.displayRedirection?e("div",[e("p",[t._v("No rubric for this actvity. Cannot review")])]):e("div",[e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Email")]),t._v(" "),e("div",{staticClass:"control has-icons-left"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.emailParticipant,expression:"emailParticipant"}],staticClass:"input",attrs:{type:"email",placeholder:"Email input"},domProps:{value:t.emailParticipant},on:{input:function(i){i.target.composing||(t.emailParticipant=i.target.value)}}}),t._v(" "),t._m(0)]),t._v(" "),e("p",{staticClass:"help"},[t._v("Enter the email id")])]),t._v(" "),e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[e("button",{staticClass:"button is-link",on:{click:function(i){t.startReview(t.activity)}}},[t._v("Submit")])])])])]),t._v(" "),t.isReviewStarted?e("div",{staticClass:"columns"},[t.indexReviewed>0?e("div",{staticClass:"column"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[e("button",{staticClass:"button is-link",on:{click:function(i){t.showReview(t.indexReviewed-1)}}},[t._v("Previous")])])])]):t._e(),t._v(" "),e("div",{staticClass:"column"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[e("button",{staticClass:"button is-link",attrs:{disabled:t.isThereNextReviewed},on:{click:function(i){t.showReview(t.indexReviewed+1)}}},[t._v("Next")])])])])]):t._e(),t._v(" "),t.isReviewStarted?e("div",[e("a",{staticClass:"button level-item",on:{click:t.postReview}},[e("span",[t._v("Save")])]),t._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("h1",[t._v("Guidelines")]),t._v(" "),e("p",[t._v(t._s(t.activity.guidelines))])])]),t._v(" "),e("p",[t._v(t._s(t.grader.reviewed[t.indexReviewed].group)+" - "+t._s(t.grader.reviewed[t.indexReviewed].email))]),t._v(" "),t._l(t.grader.reviewed,function(i,s){return e("div",{key:s},t._l(i.skills,function(i,a){return s==t.indexReviewed?e("div",{key:a,staticClass:"container is-fluid"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("section",{staticClass:"hero is-info"},[e("div",{staticClass:"hero-body"},[e("h1",{staticClass:"title"},[t._v("\n\t\t\t\t\t\t       "+t._s(i.name)+"\n\t\t\t\t\t\t     ")]),t._v(" "),e("section",{staticClass:"hero is-light"},[e("div",{staticClass:"hero-body"},t._l(i.skillDescriptors,function(i,n){return e("div",{key:n,staticClass:"columns"},[e("div",{staticClass:"column"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(i.content)+"\n\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),e("div",{staticClass:"column is-two"},[e("label",{staticClass:"checkbox is-pulled-right",attrs:{for:"check"+s+a+n}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.grader.reviewed[s].skills[a].skillDescriptors[n].acquired,expression:"grader.reviewed[h].skills[i].skillDescriptors[j].acquired"}],attrs:{type:"checkbox",id:"check"+s+a+n},domProps:{checked:Array.isArray(t.grader.reviewed[s].skills[a].skillDescriptors[n].acquired)?t._i(t.grader.reviewed[s].skills[a].skillDescriptors[n].acquired,null)>-1:t.grader.reviewed[s].skills[a].skillDescriptors[n].acquired},on:{change:function(i){var e=t.grader.reviewed[s].skills[a].skillDescriptors[n].acquired,r=i.target,o=!!r.checked;if(Array.isArray(e)){var c=t._i(e,null);r.checked?c<0&&t.$set(t.grader.reviewed[s].skills[a].skillDescriptors[n],"acquired",e.concat([null])):c>-1&&t.$set(t.grader.reviewed[s].skills[a].skillDescriptors[n],"acquired",e.slice(0,c).concat(e.slice(c+1)))}else t.$set(t.grader.reviewed[s].skills[a].skillDescriptors[n],"acquired",o)}}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t \t"+t._s(t.grader.reviewed[s].skills[a].skillDescriptors[n].acquired?"acquired":"not acquired")+"\n\t\t\t\t\t\t\t\t\t\t\t\t")])])])}))])])])])])]):t._e()}))})],2):t._e()])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("span",{staticClass:"icon is-small is-left"},[i("i",{staticClass:"fas fa-envelope"})])}]};var K=e("VU/8")(q,Q,!1,function(t){e("PSlP")},null,null).exports,J={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[t._m(0),t._v(" "),e("div",{staticClass:"column"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-content"},[e("div",{staticClass:"content"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column",attrs:{id:"title-create-container"}},[e("div",{staticClass:"title-create field is-grouped"},[e("div",{staticClass:"title-control control has-icons-left is-expanded"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input",attrs:{type:"text",placeholder:"What is it about ?"},domProps:{value:t.title},on:{input:function(i){i.target.composing||(t.title=i.target.value)}}}),t._v(" "),t._m(1)]),t._v(" "),e("div",{staticClass:"create-control control"},[e("router-link",{staticClass:"button is-info",attrs:{id:"create-button",to:"/activity?title="+t.title}},[t._v("\n                        Create activity\n                  \t")])],1)])])])])])])]),t._v(" "),t._m(2)])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"column",staticStyle:{"text-align":"center"}},[i("h2",{staticClass:"title",staticStyle:{"font-size":"2.5em"}},[this._v("Spice up learning with PeersGrader, for free")]),this._v(" "),i("p",[this._v("The simple way to set up peers grading activities for your class.")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("span",{staticClass:"icon is-small is-left"},[i("i",{staticClass:"fas fa-chalkboard"})])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"column how-it-works"},[s("article",{staticClass:"column"},[s("h1",{staticClass:"title",staticStyle:{"text-align":"center","font-size":"2.5em"}},[t._v("How it works")]),t._v(" "),s("div",{staticClass:"level pg-pg"},[s("div",{staticClass:"pg-column"},[s("p",{staticClass:"item"},[s("img",{staticClass:"img-landing",attrs:{src:e("+PkX")}})]),t._v(" "),s("h3",{staticClass:"item item-title"},[t._v("Suggest options")]),t._v(" "),s("p",{staticClass:"item"},[t._v("Select things like the activity name and guidelines, number of shifts within it, date, places.")])]),t._v(" "),s("div",{staticClass:"pg-column"},[s("p",{staticClass:"item"},[s("img",{staticClass:"img-landing",attrs:{src:e("eZKZ")}})]),t._v(" "),s("h3",{staticClass:"item item-title"},[t._v("Invite participants")]),t._v(" "),s("p",{staticClass:"item"},[t._v("With the invitation, they see their successive missions and grades the presenters. They don’t even need an account.")])]),t._v(" "),s("div",{staticClass:"pg-column"},[s("p",{staticClass:"item"},[s("img",{staticClass:"img-landing",attrs:{src:e("a1/K")}})]),t._v(" "),s("h3",{staticClass:"item item-title"},[t._v("Visualize the results")]),t._v(" "),s("p",{staticClass:"item"},[t._v(" Once the grades are in, visualize all grades! Both presenting skills and ability to fairely grade peers are taken into account.")])])])])])}]};var X=e("VU/8")({name:"Landing",data:function(){return{title:""}}},J,!1,function(t){e("6Ful")},"data-v-7b401dfe",null).exports;s.default.use(u.a);var tt=new u.a({routes:[{path:"/",name:"root",component:X},{path:"/activity/:id?",name:"crudActivity",component:H},{path:"/activity/:id/review",name:"review",component:K},{path:"/activity/:id/review/:reviewId",name:"crudReview",component:K},{path:"/activity/:id/participants",name:"activityParticipants",component:M},{path:"/activity/:id/planning",name:"activityPlanning",component:U},{path:"/activity/:id/rubric",name:"activityRubric",component:B},{path:"/find/activity",name:"findActivity",component:W}]}),it=e("//Fk"),et=e.n(it),st={namespaced:!0,state:{activity:{sessions:0,title:"",participants:[{email:"",token:"",group:"",name:"",role:"",reviewed:[]}],rubrics:[{name:"",points:0,descriptors:[{content:"",level:"",points:0}]}],basis:20,guidelines:"",invitationsSent:!0},isAdmin:!1,withId:!1,shifts:[]},actions:{sendInvitations:function(t,i){return m.a.post("/api/activity/sendInvitations",{activity:i.activity,destinators:i.destinators,message:i.message}).then(function(t){if(t.data.success)return new et.a(function(t,i){return t({sent:!0})})})},setShifts:function(t,i){t.commit("setShifts",i)},setIsAdmin:function(t,i){t.commit("setIsAdmin",i)},setUserSession:function(t,i){t.commit("setUserSession",i)},setCanReadOnly:function(t,i){t.commit("setCanReadOnly",i)},setWithId:function(t,i){t.commit("setWithId",i)},getAuthActivity:function(t,i){return m.a.get("/api/activity/"+i.urlId).then(function(e){if(e.data.success&&(console.log("auth activity"),i.pwd==e.data.activity.teacherPwd))return t.commit("setActivity",e.data.activity),console.log(e.data.activity),t.commit("setIsAdmin",!0),new et.a(function(t,i){return t({granted:!0})})}).catch(function(t){return new et.a(function(t,i){return t({granted:!1})})})},lookForActivity:function(t,i){return m.a.get("/api/activity/"+i).then(function(i){if(i.data.success)return console.log("found smthg"),console.log(i.data.activity),t.state.userSession=!1,t.commit("setActivity",i.data.activity),new et.a(function(t,e){return t({url:i.data.activity.urlId})})})},deleteActivity:function(t,i){var e=this;m.a.delete("/api/activity/"+i).then(function(i){i.data.success&&(e._vm.$notify({group:"notifications",title:"Activity deleted",text:"This activity "+i.data.activity.title+" have been deleted with success.",type:"success"}),console.log("there there"),t.dispatch("resetActivitySession"),e.showStep=1,tt.push({path:"/activity"}))})},resetActivitySession:function(t,i){console.log("resetting"),t.commit("setActivity",{presentations:0,sessions:0,title:"",teacherEmail:"",teacherName:"",participants:[{email:"",token:"",name:"",group:"",role:"",reviewed:[]}],rubrics:[{name:"",points:0,descriptors:[{content:"",level:"",points:0}]}],basis:20,guidelines:"",invitationsSent:!0}),t.commit("setIsAdmin",!1),t.commit("setWithId",!1)},setActivity:function(t,i){var e=this;return i.urlId?m.a.put("/api/activity/"+i.urlId,{activity:t.state.activity}).then(function(i){console.log("there"),console.log(i),i.data.success&&(e._vm.$notify({group:"notifications",title:"Activity updated",text:"This activity have been updated with success.",type:"success"}),console.log("there there"),t.state.activity=i.data.activity,t.state.userSession=!0)}):m.a.post("/api/activity",{activity:t.state.activity}).then(function(i){if(console.log("here"),i.data.success)return e._vm.$notify({group:"notifications",title:"Activity saved",text:"This activity have been saved with success.",type:"success"}),t.state.activity=i.data.activity,console.log("logger"),console.log(t.state.activity),t.state.userSession=!0,new et.a(function(t,e){return t({teacherPwd:i.data.activity.teacherPwd})})})},getPlanning:function(t){this._vm;var i=0,e=u(),s=i,a=I()(e),n=a.length,r=[{pools:new Array(n).fill().map(function(t){return{presenter:"",graders:[]}})}],o=function(t){var i=I()(t),e=-1,s=!0,a=!1,n=void 0;try{for(var r,o=C()(i);!(s=(r=o.next()).done);s=!0){var c=r.value;e=t[c].length>e?t[c].length:e}}catch(t){a=!0,n=t}finally{try{!s&&o.return&&o.return()}finally{if(a)throw n}}return e}(e),c=[],l=0,v=0;function d(t,i,e){return t.find(function(t){return t[i]==e})}function u(){return t.state.activity.participants.reduce(function(t,e){return t[e.group]=t[e.group]||[],"Student"==e.role&&(t[e.group].push(e),i++),t},{})}function p(i,e,s){if(""!=r[i].pools[e].presenter){var a=t.state.activity.participants.findIndex(function(t){return t.email==s.email}),n=r[i].pools[e].presenter;t.state.activity.participants[a].reviewed.push({email:n.email,group:n.group,role:n.role})}}function m(i,e){if(r[i].pools[e].graders.length>0){var s=function(s){var a=t.state.activity.participants.findIndex(function(t){return t.email==s.email}),n=r[i].pools[e].presenter;t.state.activity.participants[a].reviewed.push({email:n.email,group:n.group,role:n.role})},a=!0,n=!1,o=void 0;try{for(var c,l=C()(r[i].pools[e].graders);!(a=(c=l.next()).done);a=!0){s(c.value)}}catch(t){n=!0,o=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw o}}}}function h(t){if(v>=n&&(v=0),t)do{""!=r[l].pools[v].presenter||d(c,"group",t.group)?!r[l].pools[v].graders.find(function(i){return i.group==t.group})&&r[l].pools[v].presenter.group!=t.group&&r[l].pools[v].graders.length<o-1?(r[l].pools[v].graders=r[l].pools[v].graders||[],r[l].pools[v].graders.push(t),p(l,v,t),t=null):(++v>=n&&(v=0),""!=r[l].pools[v].presenter||d(c,"group",t.group)?!r[l].pools[v].graders.find(function(i){return i.group==t.group})&&r[l].pools[v].presenter.group!=t.group&&r[l].pools[v].graders.length<o-1&&(r[l].pools[v].graders=r[l].pools[v].graders||[],r[l].pools[v].graders.push(t),p(l,v,t),t=null):(r[l].pools[v].presenter=t,c.push(t),p(l,v,t),m(l,v),t=null)):(r[l].pools[v].presenter=t,c.push(t),p(l,v,t),m(l,v),v++,t=null)}while(null!=t)}function g(t){for(;a.some(function(i){return t[i].length>0});){var i=!0,e=!1,s=void 0;try{for(var u,h=C()(a);!(i=(u=h.next()).done);i=!0){var g=u.value;f(t[g].shift())}}catch(t){e=!0,s=t}finally{try{!i&&h.return&&h.return()}finally{if(e)throw s}}}function f(t){var i=0;if(t)do{v>=n&&(v=0),""!=r[l].pools[v].presenter||d(c,"email",t.email)||d(r[l].pools[v].graders,"group",t.group)||r[l].pools[v].graders.reduce(function(t,i){return t.concat(i.reviewed.reduce(function(t,e){return e.group!=i.group?t.concat(e.group):t},[]))},[]).includes(t.group)?!r[l].pools[v].graders.find(function(i){return i.group==t.group})&&r[l].pools[v].presenter.group!=t.group&&!r[l].pools[v].graders.some(function(i){return i.reviewed.reduce(function(t,e){return e.group!=i.group?t.concat(e.group):t},[]).includes(t.reviewed[l-1].group)})&&!t.reviewed.filter(function(i){return i!=t.group}).includes(r[l].pools[v].presenter.group)&&r[l].pools[v].graders.length<o-1?(r[l].pools[v].graders.push(t),p(l,v,t),t=null):(++v>=n&&(v=0),""!=r[l].pools[v].presenter||d(c,"email",t.email)||d(r[l].pools[v].graders,"group",t.group)||r[l].pools[v].graders.reduce(function(t,i){return t.concat(i.reviewed.reduce(function(t,e){return e.group!=i.group?t.concat(e.group):t},[]))},[]).includes(t.group)?!r[l].pools[v].graders.find(function(i){return i.group==t.group})&&r[l].pools[v].presenter.group!=t.group&&!r[l].pools[v].graders.some(function(i){return i.reviewed.reduce(function(t,e){return e.group!=i.group?t.concat(e.group):t},[]).includes(t.reviewed[l-1].group)})&&!t.reviewed.filter(function(i){return i!=t.group}).includes(r[l].pools[v].presenter.group)&&r[l].pools[v].graders.length<o-1&&(r[l].pools[v].graders.push(t),p(l,v,t),t=null):(r[l].pools[v].presenter=t,c.push(t),p(l,v,t),m(l,v),v++,t=null)):(r[l].pools[v].presenter=t,c.push(t),p(l,v,t),m(l,v),v++,t=null),i>n&&(console.log("j'ai mal à mon code, enfin bcp plus mal, genre c'était possible ? ah ouais oaui WAI WE"),""==r[l].pools[v].presenter?(r[l].pools[v].presenter=t,c.push(t),p(l,v,t),m(l,v),t=null):r[l].pools[v].graders.length<o-1&&(r[l].pools[v].graders.push(t),p(l,v,t),t=null)),i++}while(null!=t)}}t.commit("setShifts",[]),t.state.activity.participants.map(function(t){return t.reviewed=[],t}),function(){for(console.log("getGroups"),console.log(e);a.some(function(t){return e[t].length>0});){var t=!0,i=!1,s=void 0;try{for(var n,r=C()(a);!(t=(n=r.next()).done);t=!0){var o=n.value;h(e[o].shift())}}catch(t){i=!0,s=t}finally{try{!t&&r.return&&r.return()}finally{if(i)throw s}}}}(),l++,v=0;var f=0;do{for(f++;c.length<s;)r.push({pools:new Array(n).fill().map(function(t){return{presenter:"",graders:[]}})}),g(e=u()),l++,v=0;c=[]}while(f<t.state.activity.sessions);console.log("shifts over"),console.log(r),t.commit("setShifts",r)}},getters:{},mutations:{setShifts:function(t,i){t.shifts=i},setIsAdmin:function(t,i){t.isAdmin=i},resetUserSession:function(t,i){t.userSession=i},setActivity:function(t,i){t.activity=i},setWithId:function(t,i){t.withId=i}}},at={namespaced:!0,state:{activityId:0,activityUrlId:0,participants:[],errors:[]},actions:{setErrors:function(t,i){t.commit("setErrors",i)},getParticipants:function(t,i){m.a.get("http://localhost:5001/activity/"+i+"/participants").then(function(i){i.data.success&&t.commit("setParticipants",i.data.participants)})},setActivityId:function(t,i){t.commit("setActivityId",i)},setActivityUrlId:function(t,i){t.commit("setActivityUrlId",i)},setParticipants:function(t,i){t.commit("setParticipants",i)}},getters:{},mutations:{setErrors:function(t,i){t.errors=i},setActivityId:function(t,i){t.activityId=i},setActivityUrlId:function(t,i){t.activityUrlId=i},setParticipants:function(t,i){t.participants=i}}},nt={namespaced:!0,state:{review:{grader:{email:"",role:"",group:"",reviewed:[{urlId:"",name:"",role:"",graded:!1,group:"",skills:[{name:"",totalPossiblePoints:0,skillDescriptors:[{content:"",possiblePoints:0,acquired:!1}]}]}]},activityUrlId:"",urlId:"",reviewed:""},hasPushedSave:!1,hasReview:!1,showNotificationSave:!0},actions:{setShowNotificationSave:function(t,i){t.commit("setShowNotificationSave",i)},setHasReview:function(t,i){t.commit("setHasReview",i)},lookForReviewFromParticipant:function(t,i){return m.a.get("/api/activity/"+i.activityUrlId+"/review/grader/"+i.grader.email).then(function(i){i.data.hasReview?(console.log("getReviewFromParticipant"),t.commit("setReview",i.data.review),t.commit("setHasReview",!0),tt.push({path:"/activity/"+i.data.review.activityUrlId+"/review/"+i.data.review.urlId})):t.commit("setHasReview",!1)})},setHasPushedSave:function(t,i){t.commit("setHasPushedSave",i)},lookForReview:function(t,i){return m.a.get("/api/activity/"+i.activityUrlId+"/review/"+i.urlId).then(function(i){i.data.success&&(console.log("getReview"),console.log(i.data.review),t.dispatch("setReview",i.data.review))}).catch(function(t){console.log("error",t)})},setReview:function(t,i){var e=this;if(t.commit("setReview",i),t.state.hasPushedSave){if(!i.urlId)return m.a.post("/api/activity/"+i.activityUrlId+"/review",{review:i}).then(function(i){i.data.success&&(t.commit("setReview",i.data.review),t.dispatch("setHasPushedSave",!1),t.state.showNotificationSave&&(e._vm.$notify({group:"notifications",title:"Review saved",text:"Review is saved nice and smooth",type:"success"}),t.dispatch("setShowNotificationSave",!0)),tt.push({path:"/activity/"+i.data.review.activityUrlId+"/review/"+i.data.review.urlId}))});m.a.put("/api/activity/"+i.activityUrlId+"/review/"+i.urlId,{review:i}).then(function(i){t.dispatch("setHasPushedSave",!1),t.commit("setReview",i.data.review),i.data.success&&e._vm.$notify({group:"notifications",title:"Review updated",text:"This review have been updated with success.",type:"success"})})}},resetReview:function(t,i){t.dispatch("setReview",{grader:{email:"",role:"",group:"",reviewed:[{urlId:"",name:"",role:"",graded:!1,group:"",skills:[{name:"",totalPossiblePoints:0,skillDescriptors:[{content:"",possiblePoints:0,acquired:!1}]}]}]},activityUrlId:"",urlId:"",reviewed:""})}},getters:{},mutations:{setShowNotificationSave:function(t,i){t.showNotificationSave=i},setHasReview:function(t,i){t.hasReview=i},setHasPushedSave:function(t,i){t.hasPushedSave=i},setReview:function(t,i){t.review=i}}};s.default.use(r.a),s.default.use(u.a);var rt=new r.a.Store({modules:{activity:st,participants:at,review:nt}}),ot=e("CLX7"),ct=e.n(ot);s.default.config.productionTip=!1,console.log(s.default.config),s.default.use(ct.a),new s.default({el:"#app",router:tt,store:rt,components:{App:d},template:"<App/>"})},PSlP:function(t,i){},"a1/K":function(t,i,e){t.exports=e.p+"static/img/howto-grades.1a58356.svg"},eZKZ:function(t,i,e){t.exports=e.p+"static/img/howto-invite.ff04af9.svg"},ejvi:function(t,i){},fkCV:function(t,i){},gILf:function(t,i){},i4PT:function(t,i){},"kqY+":function(t,i){},p6R5:function(t,i){},u3z8:function(t,i){},uySj:function(t,i){}},["NHnr"]);
//# sourceMappingURL=app.d4fdf8a864762097959b.js.map