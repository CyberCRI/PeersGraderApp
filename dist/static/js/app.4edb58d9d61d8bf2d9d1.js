webpackJsonp([1],{"02BI":function(t,e,i){t.exports=i.p+"static/img/CRI.ffeecd0.png"},DYGC:function(t,e){},NCit:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),a=i("Dd8w"),r=i.n(a),n=i("NYxO"),o={computed:r()({},Object(n.c)("activity",{activity:"activity",withId:"withId",isAdmin:"isAdmin"}),{activityUrl:function(){return"/activity/"+this.activity.urlId}})},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nav",{staticClass:"navbar",attrs:{role:"navigation","aria-label":"main navigation"}},[i("div",{staticClass:"navbar-brand"},[t._m(0),t._v(" "),i("router-link",{staticClass:"navbar-item",attrs:{to:"/activity"}},[t._v("\n         Create new activity\n      ")]),t._v(" "),i("router-link",{staticClass:"navbar-item",attrs:{to:"/find/activity"}},[t._v("\n         Find an activity\n      ")]),t._v(" "),t.activity.urlId?i("router-link",{staticClass:"navbar-item",attrs:{to:t.activityUrl+"/participants"}},[t._v("\n         Participants\n      ")]):t._e(),t._v(" "),t.activity.urlId?i("router-link",{staticClass:"navbar-item",attrs:{to:t.activityUrl+"/planning"}},[t._v("\n         Planning\n      ")]):t._e(),t._v(" "),t.activity.urlId?i("router-link",{staticClass:"navbar-item",attrs:{to:t.activityUrl+"/rubric"}},[t._v("\n         Rubric\n      ")]):t._e(),t._v(" "),t.activity.urlId?i("router-link",{staticClass:"navbar-item",attrs:{to:t.activityUrl+"/review"}},[t._v("\n         Review\n      ")]):t._e(),t._v(" "),t._m(1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"navbar-item",attrs:{href:"https://bulma.io"}},[e("img",{attrs:{src:i("02BI"),alt:"Centre de recherches interdisciplinaires"}}),this._v("\n\t      PeerGraders\n\t    ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"navbar-burger",attrs:{role:"button","aria-label":"menu","aria-expanded":"false"}},[e("span",{attrs:{"aria-hidden":"true"}}),this._v(" "),e("span",{attrs:{"aria-hidden":"true"}}),this._v(" "),e("span",{attrs:{"aria-hidden":"true"}})])}]};var l={name:"App",components:{"pg-header":i("VU/8")(o,c,!1,function(t){i("bC41")},"data-v-70a2ceb2",null).exports}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"pg-layoutContent"},[e("div",{staticClass:"pg-fullWidthContainer"},[e("section",{staticClass:"pg-pagesContainer pg-floatingPage"},[e("div",{attrs:{id:"pg-wizardGeneralInformationPage"}},[e("div",{staticClass:"pg-pageBorder"},[e("div",{staticClass:"pg-pageShadow"},[e("div",{staticClass:"pg-pageContent"},[e("div",{staticClass:"pg-header"},[e("pg-header")],1),this._v(" "),e("notifications",{attrs:{group:"notifications"}}),this._v(" "),e("router-view")],1)])])])])])])])},staticRenderFns:[]};var u=i("VU/8")(l,v,!1,function(t){i("NCit")},null,null).exports,d=i("/ocq"),p=i("mtWM"),h=i.n(p),m=i("BO1k"),f=i.n(m),g=i("fZjL"),y=i.n(g),w={data:function(){return{password:"",errorMessage:""}},methods:r()({},Object(n.b)("activity",{getAuthActivity:"getAuthActivity"}),{checkPassword:function(){var t=this;console.log("passed pwd"),console.log(this.password),console.log("passed urlId",this.$store.state.activity.activity.urlId),this.getAuthActivity({urlId:this.$store.state.activity.activity.urlId,pwd:this.password}).then(function(){t.$notify({group:"notifications",title:"Access granted",type:"success"})})}})},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{},[i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[t._v("Password")]),t._v(" "),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"text",placeholder:"Text input"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),""!=t.errorMessage?i("p",{staticClass:"help is-error"},[t._v(t._s(t.errorMessage))]):t._e()]),t._v(" "),i("div",{staticClass:"field"},[i("div",{staticClass:"control"},[i("button",{staticClass:"button is-link",on:{click:t.checkPassword}},[t._v("Submit")])])])])])},staticRenderFns:[]};var b=i("VU/8")(w,_,!1,function(t){i("DYGC")},null,null).exports,C={name:"ActivityRead",data:function(){return{manage:!1}},components:{"pwd-activity":b},computed:r()({},Object(n.c)("activity",{activity:"activity"})),methods:{displayParticipant:function(t){var e=["name","group","role","token","reviewed","email","_id"],i=y()(t).filter(function(t){return!e.includes(t)}),s=[],a=!0,r=!1,n=void 0;try{for(var o,c=f()(i);!(a=(o=c.next()).done);a=!0){var l=o.value;s.push(t[l])}}catch(t){r=!0,n=t}finally{try{!a&&c.return&&c.return()}finally{if(r)throw n}}return t.group+" "+t.role+" "+t.name+" "+s.join(" ")},manageActivity:function(){this.manage=!0}}},k={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h1",[t._v("Activity")]),t._v(" "),i("p",[t._v(t._s(t.activity.title))]),t._v(" "),i("h1",[t._v("Guidelines")]),t._v(" "),i("p",[t._v(t._s(t.activity.guidelines))]),t._v(" "),i("h1",[t._v("Sessions")]),t._v(" "),i("p",[t._v(t._s(t.activity.sessions))]),t._v(" "),i("h1",[t._v("Participants")]),t._v(" "),i("p",[i("ul",t._l(t.activity.participants,function(e){return i("li",[t._v("\n\t\t\t\t"+t._s(t.displayParticipant(e))+"\n\t\t\t")])}))]),t._v(" "),t.manage?i("pwd-activity"):i("button",{on:{click:t.manageActivity}},[t._v(" Manage activity")])],1)},staticRenderFns:[]};var A=i("VU/8")(C,k,!1,function(t){i("bDVA")},null,null).exports,P={name:"ActivityParticipants",data:function(){return{csvInsertion:"",participantRoute:!1,check:!1}},computed:r()({},Object(n.c)("activity",{activity:"activity"}),Object(n.c)("participants",{errors:"errors"})),methods:r()({isNotDynamicKey:function(t){return"token"!=t&&"email"!=t&&"_id"!=t&&"group"!=t&&"role"!=t&&"reviewed"!=t},isRowError:function(t){return this.errors.find(function(e){return e.line-1==t})},isThereDuplicate:function(){this.setErrors([]);for(var t=this.activity.participants.map(function(t){return t.email}),e=0,i=-1;e<t.length;e++)(i=t.indexOf(t[e],e+1))>-1&&this.errors.push({line:i+1,message:"Duplicate email line "+e+" on line "+i+".",type:"error"},{line:e+1})},convertCSV:function(){if(this.setErrors([]),""!=document.getElementById("textarea").value){for(var t=document.getElementById("textarea").value.split("\n"),e=[],i=[],s=0,a=0,r=[];s<t.length;s++)if(0==s){e=(r=t[s].split(",").map(function(t){return t.trim()})).filter(function(t){return"_id"!=t}),a=r.length;for(var n=0;n<r.length;n++){r.indexOf(r[n],n+1)>1&&this.errors.push({type:"warning",message:"Header contains duplicate field. Last value will count."})}r.find(function(t){return"email"==t})&&r.find(function(t){return"group"==t})&&r.find(function(t){return"role"==t})||this.errors.push({type:"error",line:s,message:"The fiels does not contain the minimum required field (email,group,role)."})}else t[s].split(",").length==a?i.push(t[s].split(",")):this.errors.push({type:"error",message:"The line "+s+" is not matching the format set in header.",line:s});if(0==this.errors.length){for(s=0;s<i.length;s++){var o=i[s];this.activity.participants.length-1<s&&this.addParticipant(s);for(n=0;n<o.length;n++){if("role"==e[n]){var c=o[n];o[n]=c.charAt(0).toUpperCase()+c.slice(1)}this.activity.participants[s][e[n]]=o[n]}}this.isThereDuplicate(),this.check=!0}}}},Object(n.b)("participants",{getParticipants:"getParticipants",setParticipants:"setParticipants",setActivityId:"setActivityId",setActivityUrlId:"setActivityUrlId"}),Object(n.b)("activity",{setActivity:"setActivity"}),Object(n.b)("participants",{setErrors:"setErrors"}),{postActivity:function(){console.log("launch save"),0==this.errors.length&&this.setActivity(this.activity)},addParticipant:function(t){this.activity.participants.splice(t+1,0,{group:"",email:"",role:"",reviewed:[]}),this.isThereDuplicate()},removeParticipant:function(t){this.activity.participants.length>1&&this.activity.participants.splice(t,1),this.isThereDuplicate()}}),beforeRouteEnter:function(t,e,i){i(function(t){console.log("in there"),t.participantRoute=!0})}},R={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.participantRoute?i("a",{staticClass:"button level-item",on:{click:t.postActivity}},[i("span",[t._v("Update")])]):t._e(),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"field participants-label"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.csvInsertion,expression:"csvInsertion"}],staticClass:"textarea",attrs:{id:"textarea",placeholder:"Textarea"},domProps:{value:t.csvInsertion},on:{blur:t.convertCSV,input:function(e){e.target.composing||(t.csvInsertion=e.target.value)}}})]),t._v(" "),t.errors.length>0?i("div",{},t._l(t.errors,function(e){return i("p",[e.message?i("span",{staticClass:"help",class:{"is-warning":"warning"==e.type,"is-danger":"error"==e.type}},[t._v(t._s(e.message))]):t._e()])})):i("div",[""!=t.csvInsertion&&t.check?i("p",{staticClass:"help is-success"},[t._v("Form is valid")]):t._e()]),t._v(" "),t._l(t.activity.participants,function(e,s){return i("div",{staticClass:"row-participant",class:{"row-error":t.isRowError(s)}},[t._l(Object.keys(e),function(s){return i("div",{},[t.isNotDynamicKey(s)?i("div",{staticClass:"field"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e[s],expression:"participant[key]"}],staticClass:"input",attrs:{type:"text",placeholder:"Participant's "+s},domProps:{value:e[s]},on:{input:function(i){i.target.composing||t.$set(e,s,i.target.value)}}})]):t._e()])}),t._v(" "),i("div",{},[i("div",{staticClass:"field"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"participant.email"}],staticClass:"input",attrs:{type:"email",placeholder:"Participant's email"},domProps:{value:e.email},on:{input:function(i){i.target.composing||t.$set(e,"email",i.target.value)}}})])]),t._v(" "),i("div",{},[i("div",{staticClass:"field"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.group,expression:"participant.group"}],staticClass:"input",attrs:{type:"text",placeholder:"Participant's group"},domProps:{value:e.group},on:{input:function(i){i.target.composing||t.$set(e,"group",i.target.value)}}})])]),t._v(" "),i("div",{},[i("div",{staticClass:"field"},[i("div",{staticClass:"select"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"participant.role"}],on:{change:function(i){var s=Array.prototype.filter.call(i.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(e,"role",i.target.multiple?s:s[0])}}},[i("option",{attrs:{disabled:"",value:""}},[t._v("Participant's role")]),t._v(" "),i("option",[t._v("Student")]),t._v(" "),i("option",[t._v("Observator")]),t._v(" "),i("option",[t._v("Teacher")])])])])]),t._v(" "),i("div",{staticClass:"add-participant",on:{click:function(e){t.addParticipant(s)}}},[i("i",{staticClass:"far fa-plus-square"})]),t._v(" "),i("div",{staticClass:"remove-participant",on:{click:function(e){t.removeParticipant(s)}}},[i("i",{staticClass:"far fa-minus-square"})])],2)})],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"level participants-label"},[e("label",{staticClass:"label"},[this._v("Participants")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"level participants-label"},[e("label",{staticClass:"label"},[this._v("CSV Insertion")])])}]};var I=i("VU/8")(P,R,!1,function(t){i("xPQp")},"data-v-55b58cfd",null).exports,S={name:"Activity",components:{"read-activity":A,"participants-acitivity":I},data:function(){return{showStep:1,showModal:!1,modalInfo:{activityPath:"",activityPassword:""}}},computed:r()({},Object(n.c)("activity",{activity:"activity",withId:"withId",isAdmin:"isAdmin"}),Object(n.c)("participants",{errors:"errors"}),{checkFirstStepCompletion:function(){return this.activity.title&&this.activity.guidelines&&this.activity.sessions}}),methods:r()({},Object(n.b)("activity",{setActivity:"setActivity",resetActivitySession:"resetActivitySession",getAuthActivity:"getAuthActivity",setWithId:"setWithId",lookForActivity:"lookForActivity",deleteActivity:"deleteActivity"}),Object(n.b)("participants",{setErrors:"setErrors"}),{delActivity:function(){this.deleteActivity(this.activity.urlId)},postActivity:function(){var t=this;if(console.log("launch save"),0==this.errors.length){var e=this;this.setActivity(this.activity).then(function(i){i.teacherPwd&&(e.modalInfo.activityPath="http://localhost:5000/#/activity/"+t.activity.urlId,e.modalInfo.activityPassword=i.teacherPwd,e.showModal=!0)})}},goStep:function(t){this.showStep+=t},redirect:function(){this.$router.push({path:"/activity/"+this.activity.urlId})}}),beforeRouteUpdate:function(t,e,i){console.log("beforeRouteUpdate"),this.showStep=1,this.showModal=!1,t.params.id?this.setWithId(!0):(console.log("here in update"),this.resetActivitySession(),this.setErrors([]),console.log("reset ?")),i()},beforeRouteEnter:function(t,e,i){var s=this;console.log("to then from"),console.log(t),console.log(e),t.params.id?i(function(e){e.showModal=!1,e.setWithId(!0),e.lookForActivity(t.params.id)}):(console.log("here in route"),i(function(t){t.showModal=!1,console.log("before reset"),t.resetActivitySession(),s.setErrors([]),console.log("after reset, has it reset")}))}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.withId&&!t.isAdmin?i("div",[i("read-activity")],1):i("div",[i("notifications",{attrs:{group:"activity"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.showStep,expression:"showStep === 1 "}]},[i("h2",[t._v("Create activity 1/3")]),t._v(" "),i("div",{staticClass:"field is-horizontal"},[t._m(0),t._v(" "),i("div",{staticClass:"field-body"},[i("div",{staticClass:"field"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activity.title,expression:"activity.title"}],staticClass:"input",attrs:{type:"text",placeholder:"Activity's title"},domProps:{value:t.activity.title},on:{input:function(e){e.target.composing||t.$set(t.activity,"title",e.target.value)}}})])])]),t._v(" "),i("div",{staticClass:"field is-horizontal"},[t._m(1),t._v(" "),i("div",{staticClass:"field-body"},[i("div",{staticClass:"field"},[i("div",{staticClass:"control"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.activity.guidelines,expression:"activity.guidelines"}],staticClass:"textarea",attrs:{placeholder:"Activity's guidelines"},domProps:{value:t.activity.guidelines},on:{input:function(e){e.target.composing||t.$set(t.activity,"guidelines",e.target.value)}}})])])])]),t._v(" "),i("div",{staticClass:"field is-horizontal"},[t._m(2),t._v(" "),i("div",{staticClass:"field-body"},[i("div",{staticClass:"field"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activity.sessions,expression:"activity.sessions"}],staticClass:"input",attrs:{type:"number",placeholder:"How many sessions will there be ?"},domProps:{value:t.activity.sessions},on:{input:function(e){e.target.composing||t.$set(t.activity,"sessions",e.target.value)}}})])])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.showStep,expression:"showStep === 2 "}]},[i("h2",[t._v("Create activity 2/3")]),t._v(" "),i("participants-acitivity")],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3===t.showStep,expression:"showStep === 3 "}]},[i("h2",[t._v("Create activity 3/3")]),t._v(" "),i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[t._v("Name")]),t._v(" "),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activity.teacherName,expression:"activity.teacherName"}],staticClass:"input",attrs:{type:"text",placeholder:"Your name"},domProps:{value:t.activity.teacherName},on:{input:function(e){e.target.composing||t.$set(t.activity,"teacherName",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[t._v("Email")]),t._v(" "),i("div",{staticClass:"control has-icons-left"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activity.teacherEmail,expression:"activity.teacherEmail"}],staticClass:"input",attrs:{type:"email",placeholder:"Email input"},domProps:{value:t.activity.teacherEmail},on:{input:function(e){e.target.composing||t.$set(t.activity,"teacherEmail",e.target.value)}}}),t._v(" "),t._m(3)])])]),t._v(" "),i("div",{staticClass:"modal",class:{"is-active":t.showModal}},[i("div",{staticClass:"modal-background"}),t._v(" "),i("div",{staticClass:"modal-content"},[i("p",[t._v("Activity : "+t._s(t.modalInfo.activityPath))]),t._v(" "),i("p",[t._v("Password : "+t._s(t.modalInfo.activityPassword))]),t._v(" "),i("button",{staticClass:"button",on:{click:t.redirect}},[t._v("Alright")])]),t._v(" "),i("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:t.redirect}})]),t._v(" "),i("div",{staticClass:"container is-fluid",attrs:{id:"stepper"}},[i("div",{attrs:{id:"level"}},[i("p",{staticClass:"level-right"},[t.showStep>1?i("a",{staticClass:"button level-item",on:{click:function(e){t.goStep(-1)}}},[t._v("\n\t\t\t\t\t\t\t\tPrevious\n\t\t\t\t\t\t\t")]):t._e(),t._v(" "),t.showStep<3?i("a",{staticClass:"button level-item",attrs:{disabled:!t.checkFirstStepCompletion},on:{click:function(e){t.goStep(1)}}},[t._v("\n\t\t\t\t\t\t\t\tContinue\n\t\t\t\t\t\t\t")]):i("a",{staticClass:"button level-item",on:{click:t.postActivity}},[void 0!=t.activity.urlId?i("span",[t._v("Update")]):i("span",[t._v("Save")])]),t._v(" "),void 0!=t.activity.urlId?i("a",{staticClass:"button level-item",on:{click:t.delActivity}},[t._v("\n\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t")]):t._e()])])])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[this._v("Title")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[this._v("Guidelines")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[this._v("Sessions")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small is-left"},[e("i",{staticClass:"fas fa-envelope"})])}]};var E=i("VU/8")(S,x,!1,function(t){i("QRvs")},"data-v-0ddb448c",null).exports,N={data:function(){return{errorMessage:"",activityKey:""}},computed:r()({},Object(n.c)("activity",{userSession:"userSession"})),methods:r()({},Object(n.b)("activity",{resetActivitySession:"resetActivitySession",lookForActivity:"lookForActivity"}),{findActivity:function(){var t=this;console.log("looking for"),console.log(this.activityKey),this.lookForActivity(this.activityKey).then(function(e){t.$router.push({path:"/activity/"+e.url})}).catch(function(e){t.errorMessage=e})}}),beforeRouteEnter:function(t,e,i){i(function(t){t.resetActivitySession()})}},$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-pg"},[i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[t._v("Activity's Id")]),t._v(" "),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activityKey,expression:"activityKey"}],staticClass:"input",attrs:{type:"text",placeholder:"Text input"},domProps:{value:t.activityKey},on:{input:function(e){e.target.composing||(t.activityKey=e.target.value)}}})]),t._v(" "),""!=t.errorMessage?i("p",{staticClass:"help is-error"},[t._v(t._s(t.errorMessage))]):t._e()]),t._v(" "),i("div",{staticClass:"field"},[i("div",{staticClass:"control"},[i("button",{staticClass:"button is-link",on:{click:t.findActivity}},[t._v("Submit")])])])])},staticRenderFns:[]};var U=i("VU/8")(N,$,!1,function(t){i("uySj")},null,null).exports,F={name:"activityPlanning",data:function(){return{}},computed:r()({},Object(n.c)("activity",{activity:"activity",shifts:"shifts"})),methods:r()({},Object(n.b)("activity",{lookForActivity:"lookForActivity",getPlanning:"getPlanning"})),beforeRouteEnter:function(t,e,i){i(function(e){e.lookForActivity(t.params.id)})}},D={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("button",{on:{click:function(e){t.getPlanning()}}},[t._v("get planning")]),t._v(" "),i("table",{staticClass:"table"},[i("thead",[i("tr",[i("td",{attrs:{colspan:"2"}}),i("td",{staticStyle:{"text-align":"center"},attrs:{colspan:t.shifts.length}},[t._v("Shifts")])]),t._v(" "),i("tr",[i("td",[t._v("groupe")]),i("td",[t._v("étudiant")]),t._v(" "),t._l(t.shifts,function(e,s){return i("td",{key:s+t.shifts[s]},[t._v("#"+t._s(s+1))])})],2)]),t._v(" "),i("tbody",t._l(t.activity.participants,function(e){return i("tr",[i("td",[t._v(t._s(e.group))]),t._v(" "),i("td",[t._v(t._s(e.email))]),t._v(" "),t._l(e.reviewed,function(e,s){return i("td",[t._v(t._s(e.group))])})],2)}))])])},staticRenderFns:[]};var j=i("VU/8")(F,D,!1,function(t){i("u3z8")},"data-v-3d346c94",null).exports,O={name:"ActivityRubric",data:function(){return{}},methods:r()({},Object(n.b)("activity",{setActivity:"setActivity"}),{check:function(){return this.activity.rubrics.every(function(t){return Number(t.points)===t.descriptors.reduce(function(t,e){return t+Number(e.points)},0)})},changeLevel:function(t,e){this.activity.rubrics[t].descriptors.sort(function(t,e){return t.level-e.level})},postActivity:function(){console.log("launch save rubric"),this.check()?this.setActivity(this.activity):this.$notify({group:"notifications",type:"error",title:"Points skill incoherence"})},addSkill:function(t){this.activity.rubrics.splice(t+1,0,{name:"",points:0,descriptors:[{content:"",points:0,level:""}]})},removeSkill:function(t){this.activity.rubrics.length>1&&this.activity.rubrics.splice(t,1)},addDescriptor:function(t,e){this.activity.rubrics[t].descriptors.splice(e+1,0,{content:"",points:0,level:""})},removeDescriptor:function(t,e){this.activity.rubrics[t].descriptors.length>1&&this.activity.rubrics[t].descriptors.splice(e,1)}}),components:{"pwd-activity":b},computed:r()({},Object(n.c)("activity",{activity:"activity",isAdmin:"isAdmin"}))},q={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.isAdmin?i("div",[i("a",{staticClass:"button level-item",on:{click:t.postActivity}},[i("span",[t._v("Save")])]),t._v(" "),i("div",{staticClass:"level"},[i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[t._v("Basis")]),t._v(" "),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activity.basis,expression:"activity.basis"}],staticClass:"input",attrs:{type:"number",placeholder:"Activity's basis"},domProps:{value:t.activity.basis},on:{input:function(e){e.target.composing||t.$set(t.activity,"basis",e.target.value)}}})])])]),t._v(" "),t._l(t.activity.rubrics,function(e,s){return i("div",{key:s},[i("div",{staticClass:"columns"},[i("div",{staticClass:"column"},[i("div",{staticClass:"field has-addons"},[t._m(0,!0),t._v(" "),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"rubric.name"}],staticClass:"input",attrs:{type:"text",placeholder:"Skill's name"},domProps:{value:e.name},on:{input:function(i){i.target.composing||t.$set(e,"name",i.target.value)}}})])])]),t._v(" "),i("div",{staticClass:"column"},[i("div",{staticClass:"field has-addons"},[t._m(1,!0),t._v(" "),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.points,expression:"rubric.points"}],staticClass:"input",attrs:{type:"number",placeholder:"Skill's points"},domProps:{value:e.points},on:{input:function(i){i.target.composing||t.$set(e,"points",i.target.value)}}})])])]),t._v(" "),i("div",{staticClass:"column"},[i("div",{staticClass:"add-skill",on:{click:function(e){t.addSkill(s)}}},[i("i",{staticClass:"far fa-plus-square"})]),t._v(" "),i("div",{staticClass:"remove-skill",on:{click:function(e){t.removeSkill(s)}}},[i("i",{staticClass:"far fa-minus-square"})])])]),t._v(" "),i("section",{staticClass:"hero is-light"},[i("div",{staticClass:"hero-body"},t._l(e.descriptors,function(e,a){return i("div",{key:a,staticClass:"columns"},[i("div",{staticClass:"column"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"descriptor.content"}],staticClass:"textarea",attrs:{placeholder:"Descriptor's description"},domProps:{value:e.content},on:{input:function(i){i.target.composing||t.$set(e,"content",i.target.value)}}})]),t._v(" "),i("div",{staticClass:"column"},[i("div",{staticClass:"field"},[i("div",{staticClass:"select"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.level,expression:"descriptor.level"}],on:{change:[function(i){var s=Array.prototype.filter.call(i.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(e,"level",i.target.multiple?s:s[0])},function(e){t.changeLevel(s,a)}]}},[i("option",{attrs:{disabled:"",value:""}},[t._v("Level")]),t._v(" "),i("option",{domProps:{value:1}},[t._v("Easy")]),t._v(" "),i("option",{domProps:{value:2}},[t._v("Medium")]),t._v(" "),i("option",{domProps:{value:3}},[t._v("Hard")]),t._v(" "),i("option",{domProps:{value:4}},[t._v("Expert")])])])])]),t._v(" "),i("div",{staticClass:"column"},[i("div",{staticClass:"field has-addons"},[t._m(2,!0),t._v(" "),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.points,expression:"descriptor.points"}],staticClass:"input",attrs:{type:"number",placeholder:"descriptor's point"},domProps:{value:e.points},on:{input:function(i){i.target.composing||t.$set(e,"points",i.target.value)}}})])])]),t._v(" "),i("div",{staticClass:"column"},[i("div",{staticClass:"add-descriptor",on:{click:function(e){t.addDescriptor(s,a)}}},[i("i",{staticClass:"far fa-plus-square"})]),t._v(" "),i("div",{staticClass:"remove-descriptor",on:{click:function(e){t.removeDescriptor(s,a)}}},[i("i",{staticClass:"far fa-minus-square"})])])])}))])])})],2):i("pwd-activity")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"control"},[e("a",{staticClass:"button is-info"},[this._v("\n\t\t\t\t\t      Skill\n\t\t\t\t\t    ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"control"},[e("a",{staticClass:"button is-info"},[this._v("\n\t\t\t\t\t      Total points\n\t\t\t\t\t    ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"control"},[e("a",{staticClass:"button is-info"},[this._v("\n\t\t\t\t\t\t\t      Points\n\t\t\t\t\t\t\t    ")])])}]};var H=i("VU/8")(O,q,!1,function(t){i("ejvi")},null,null).exports,T=i("c/Tr"),M=i.n(T),V=i("Xxa5"),W=i.n(V),G=i("exGp"),B=i.n(G),K={name:"Review",data:function(){return{emailParticipant:"",isReviewStarted:!1,indexReviewed:0,grader:{}}},computed:r()({},Object(n.c)("activity",{activity:"activity"}),Object(n.c)("review",{review:"review",hasReview:"hasReview"}),{displayRedirection:function(){return 1==this.activity.rubrics.length&&""==this.activity.rubrics[0].name&&0==this.activity.rubrics[0].points&&1==this.activity.rubrics[0].descriptors.length&&0==this.activity.rubrics[0].descriptors[0].content&&0==this.activity.rubrics[0].descriptors[0].points},isThereNextReviewed:function(){var t=this;return!!this.review.grader.reviewed&&this.indexReviewed>=this.review.grader.reviewed.filter(function(e){return e.group!=t.review.grader.group}).length-1}}),methods:r()({},Object(n.b)("activity",{lookForActivity:"lookForActivity",setActivity:"setActivity",getPlanning:"getPlanning"}),Object(n.b)("review",{setReview:"setReview",setHasPushedSave:"setHasPushedSave",lookForReview:"lookForReview",lookForReviewFromParticipant:"lookForReviewFromParticipant",setShowNotificationSave:"setShowNotificationSave"}),{getGrader:function(t,e){return t.find(function(t){return t.token==e||t.email==e})},saveReviewsBeforeHand:function(t,e){var i=this.getGrader(t.participants,e||this.emailParticipant),s=this;this.getPlanning().then(function(){var t=!0,e=!1,a=void 0;try{for(var r,n=f()(i.reviewed);!(t=(r=n.next()).done);t=!0){r.value;s.grader=i,s.setHasPushedSave(!0),s.setShowNotificationSave(!1),s.postReview()}}catch(t){e=!0,a=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw a}}})},startReview:function(t,e){var i=this;return B()(W.a.mark(function s(){var a;return W.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(a=i.getGrader(t.participants,e||i.emailParticipant))){s.next=7;break}return s.next=4,i.lookForReviewFromParticipant({activityUrlId:t.urlId,grader:{email:a.email}}).then(function(){i.grader=i.review.grader,i.isReviewStarted=!0});case 4:i.hasReview||(i.saveReviewsBeforeHand(i.activity,i.emailParticipant),i.emailParticipant=a.email,i.setReview(i.getNewReview(t,a)),i.grader=a,i.isReviewStarted=!0),s.next=8;break;case 7:i.$notify({group:"notifications",type:"error",title:"wrong credentials"});case 8:case"end":return s.stop()}},s,i)}))()},showReview:function(t){this.indexReviewed=t>this.review.grader.reviewed.length?this.review.grader.reviewed.length:t},getNewReview:function(t,e){var i=this.getEmptySkillTable(t.rubrics);e.reviewed=M()(e.reviewed.filter(function(t){return t.group!=e.group}));var s=!0,a=!1,r=void 0;try{for(var n,o=f()(e.reviewed);!(s=(n=o.next()).done);s=!0){n.value.skills=M()(i)}}catch(t){a=!0,r=t}finally{try{!s&&o.return&&o.return()}finally{if(a)throw r}}return{grader:e,activityUrlId:t.urlId}},getEmptySkillTable:function(t){for(var e=new Array(t.length),i=0;i<t.length;i++){e[i]={rubricId:t[i]._id,name:t[i].name,totalPossiblePoints:t[i].points,skillDescriptors:new Array(t[i].descriptors.length)};for(var s=0;s<t[i].descriptors.length;s++)e[i].skillDescriptors[s]={content:t[i].descriptors[s].content,descriptorId:t[i].descriptors[s]._id,possiblePoints:t[i].descriptors[s].points,acquired:!1}}return e},postReview:function(){var t=this;this.setHasPushedSave(!0),this.review.urlId?(this.review.grader=this.grader,this.setReview(this.review)):this.setReview({grader:this.grader,activityUrlId:this.review.activityUrlId}).then(function(){t.grader=t.review.grader})}}),beforeRouteEnter:function(t,e,i){var s,a=this;console.log("beforeRouteEnter"),i((s=B()(W.a.mark(function e(i){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.lookForActivity(t.params.id);case 2:if(!t.params.reviewId){e.next=7;break}return e.next=5,i.lookForReview({activityUrlId:t.params.id,urlId:t.params.reviewId}).then(function(){i.grader=i.review.grader,console.log("here",i.review.grader),console.log("here",i.grader),i.emailParticipant=i.review.grader.email,i.isReviewStarted=!0});case 5:e.next=8;break;case 7:t.query.ptoken&&(i.saveReviewsBeforeHand(i.activity,t.query.ptoken),i.startReview(i.activity,t.query.ptoken));case 8:case"end":return e.stop()}},e,a)})),function(t){return s.apply(this,arguments)}))},beforeRouteUpdate:function(t,e,i){var s=this;return B()(W.a.mark(function e(){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("beforeRouteUpdate"),!t.params.reviewId){e.next=8;break}return e.next=4,s.lookForActivity(t.params.id);case 4:return e.next=6,s.lookForReview({activityUrlId:t.params.id,urlId:t.params.reviewId}).then(function(){s.grader=s.review.grader,console.log("theree ",s.grader),console.log("there",s.review.grader),s.emailParticipant=s.review.grader.email,s.isReviewStarted=!0});case 6:e.next=9;break;case 8:s.lookForActivity(t.params.id);case 9:case"end":return e.stop()}},e,s)}))()}},z={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.displayRedirection?i("div",[i("p",[t._v("No rubric for this actvity. Cannot review")])]):i("div",[i("div",{staticClass:"columns"},[i("div",{staticClass:"column"},[i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[t._v("Email")]),t._v(" "),i("div",{staticClass:"control has-icons-left"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.emailParticipant,expression:"emailParticipant"}],staticClass:"input",attrs:{type:"email",placeholder:"Email input"},domProps:{value:t.emailParticipant},on:{input:function(e){e.target.composing||(t.emailParticipant=e.target.value)}}}),t._v(" "),t._m(0)]),t._v(" "),i("p",{staticClass:"help"},[t._v("Enter the email id")])]),t._v(" "),i("div",{staticClass:"field"},[i("div",{staticClass:"control"},[i("button",{staticClass:"button is-link",on:{click:function(e){t.startReview(t.activity)}}},[t._v("Submit")])])])])]),t._v(" "),t.isReviewStarted?i("div",{staticClass:"columns"},[t.indexReviewed>0?i("div",{staticClass:"column"},[i("div",{staticClass:"field"},[i("div",{staticClass:"control"},[i("button",{staticClass:"button is-link",on:{click:function(e){t.showReview(t.indexReviewed-1)}}},[t._v("Previous")])])])]):t._e(),t._v(" "),i("div",{staticClass:"column"},[i("div",{staticClass:"field"},[i("div",{staticClass:"control"},[i("button",{staticClass:"button is-link",attrs:{disabled:t.isThereNextReviewed},on:{click:function(e){t.showReview(t.indexReviewed+1)}}},[t._v("Next")])])])])]):t._e(),t._v(" "),t.isReviewStarted?i("div",[i("a",{staticClass:"button level-item",on:{click:t.postReview}},[i("span",[t._v("Save")])]),t._v(" "),i("div",{staticClass:"columns"},[i("div",{staticClass:"column"},[i("h1",[t._v("Guidelines")]),t._v(" "),i("p",[t._v(t._s(t.activity.guidelines))])])]),t._v(" "),i("p",[t._v(t._s(t.grader.reviewed[t.indexReviewed].group)+" - "+t._s(t.grader.reviewed[t.indexReviewed].email))]),t._v(" "),t._l(t.grader.reviewed,function(e,s){return i("div",{key:s},t._l(e.skills,function(e,a){return s==t.indexReviewed?i("div",{key:a,staticClass:"container is-fluid"},[i("div",{staticClass:"columns"},[i("div",{staticClass:"column"},[i("section",{staticClass:"hero is-info"},[i("div",{staticClass:"hero-body"},[i("h1",{staticClass:"title"},[t._v("\n\t\t\t\t\t\t       "+t._s(e.name)+"\n\t\t\t\t\t\t     ")]),t._v(" "),i("section",{staticClass:"hero is-light"},[i("div",{staticClass:"hero-body"},t._l(e.skillDescriptors,function(e,r){return i("div",{key:r,staticClass:"columns"},[i("div",{staticClass:"column"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.content)+"\n\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),i("div",{staticClass:"column is-two"},[i("label",{staticClass:"checkbox is-pulled-right",attrs:{for:"check"+s+a+r}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.grader.reviewed[s].skills[a].skillDescriptors[r].acquired,expression:"grader.reviewed[h].skills[i].skillDescriptors[j].acquired"}],attrs:{type:"checkbox",id:"check"+s+a+r},domProps:{checked:Array.isArray(t.grader.reviewed[s].skills[a].skillDescriptors[r].acquired)?t._i(t.grader.reviewed[s].skills[a].skillDescriptors[r].acquired,null)>-1:t.grader.reviewed[s].skills[a].skillDescriptors[r].acquired},on:{change:function(e){var i=t.grader.reviewed[s].skills[a].skillDescriptors[r].acquired,n=e.target,o=!!n.checked;if(Array.isArray(i)){var c=t._i(i,null);n.checked?c<0&&t.$set(t.grader.reviewed[s].skills[a].skillDescriptors[r],"acquired",i.concat([null])):c>-1&&t.$set(t.grader.reviewed[s].skills[a].skillDescriptors[r],"acquired",i.slice(0,c).concat(i.slice(c+1)))}else t.$set(t.grader.reviewed[s].skills[a].skillDescriptors[r],"acquired",o)}}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t \t"+t._s(t.grader.reviewed[s].skills[a].skillDescriptors[r].acquired?"acquired":"not acquired")+"\n\t\t\t\t\t\t\t\t\t\t\t\t")])])])}))])])])])])]):t._e()}))})],2):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small is-left"},[e("i",{staticClass:"fas fa-envelope"})])}]};var L=i("VU/8")(K,z,!1,function(t){i("PSlP")},null,null).exports;s.default.use(d.a);var Q=new d.a({routes:[{path:"/",name:"root",redirect:"/activity"},{path:"/activity/:id?",name:"crudActivity",component:E},{path:"/activity/:id/review",name:"review",component:L},{path:"/activity/:id/review/:reviewId",name:"crudReview",component:L},{path:"/activity/:id/participants",name:"activityParticipants",component:I},{path:"/activity/:id/planning",name:"activityPlanning",component:j},{path:"/activity/:id/rubric",name:"activityRubric",component:H},{path:"/find/activity",name:"findActivity",component:U}]}),Y=i("//Fk"),X=i.n(Y),J={namespaced:!0,state:{activity:{sessions:0,title:"",participants:[{email:"",token:"",group:"",name:"",role:"",reviewed:[]}],rubrics:[{name:"",points:0,descriptors:[{content:"",level:"",points:0}]}],basis:20,guidelines:"",invitationsSent:!0},isAdmin:!1,withId:!1,shifts:[]},actions:{setShifts:function(t,e){t.commit("setShifts",e)},setIsAdmin:function(t,e){t.commit("setIsAdmin",e)},setUserSession:function(t,e){t.commit("setUserSession",e)},setCanReadOnly:function(t,e){t.commit("setCanReadOnly",e)},setWithId:function(t,e){t.commit("setWithId",e)},getAuthActivity:function(t,e){h.a.get("/api/activity/"+e.urlId).then(function(i){i.data.success&&(console.log("auth activity"),e.pwd==i.data.activity.teacherPwd&&(t.commit("setActivity",i.data.activity),console.log(i.data.activity),t.commit("setIsAdmin",!0)))}).catch(function(t){console.log("error",t)})},lookForActivity:function(t,e){return h.a.get("/api/activity/"+e).then(function(e){if(e.data.success)return console.log("found smthg"),console.log(e.data.activity),t.state.userSession=!1,t.commit("setActivity",e.data.activity),new X.a(function(t,i){return t({url:e.data.activity.urlId})})})},deleteActivity:function(t,e){var i=this;h.a.delete("/api/activity/"+e).then(function(e){e.data.success&&(i._vm.$notify({group:"notifications",title:"Activity deleted",text:"This activity "+e.data.activity.title+" have been deleted with success.",type:"success"}),console.log("there there"),t.dispatch("resetActivitySession"),i.showStep=1,Q.push({path:"/activity"}))})},resetActivitySession:function(t,e){console.log("resetting"),t.commit("setActivity",{presentations:0,sessions:0,title:"",teacherEmail:"",teacherName:"",participants:[{email:"",token:"",name:"",group:"",role:"",reviewed:[]}],rubrics:[{name:"",points:0,descriptors:[{content:"",level:"",points:0}]}],basis:20,guidelines:"",invitationsSent:!0}),t.commit("setIsAdmin",!1),t.commit("setWithId",!1)},setActivity:function(t,e){var i=this;return e.urlId?h.a.put("/api/activity/"+e.urlId,{activity:t.state.activity}).then(function(e){console.log("there"),console.log(e),e.data.success&&(i._vm.$notify({group:"notifications",title:"Activity updated",text:"This activity have been updated with success.",type:"success"}),console.log("there there"),t.state.activity=e.data.activity,t.state.userSession=!0)}):h.a.post("/api/activity",{activity:t.state.activity}).then(function(e){if(console.log("here"),e.data.success)return i._vm.$notify({group:"notifications",title:"Activity saved",text:"This activity have been saved with success.",type:"success"}),t.state.activity=e.data.activity,console.log("logger"),console.log(t.state.activity),t.state.userSession=!0,new X.a(function(t,i){return t({teacherPwd:e.data.activity.teacherPwd})})})},getPlanning:function(t){this._vm;var e=0,i=d(),s=e,a=y()(i),r=a.length,n=[{pools:new Array(r).fill().map(function(t){return{presenter:"",graders:[]}})}],o=function(t){var e=y()(t),i=-1,s=!0,a=!1,r=void 0;try{for(var n,o=f()(e);!(s=(n=o.next()).done);s=!0){var c=n.value;i=t[c].length>i?t[c].length:i}}catch(t){a=!0,r=t}finally{try{!s&&o.return&&o.return()}finally{if(a)throw r}}return i}(i),c=[],l=0,v=0;function u(t,e,i){return t.find(function(t){return t[e]==i})}function d(){return t.state.activity.participants.reduce(function(t,i){return t[i.group]=t[i.group]||[],"Student"==i.role&&(t[i.group].push(i),e++),t},{})}function p(e,i,s){if(""!=n[e].pools[i].presenter){var a=t.state.activity.participants.findIndex(function(t){return t.email==s.email}),r=n[e].pools[i].presenter;t.state.activity.participants[a].reviewed.push({email:r.email,group:r.group,role:r.role})}}function h(e,i){if(n[e].pools[i].graders.length>0){var s=function(s){var a=t.state.activity.participants.findIndex(function(t){return t.email==s.email}),r=n[e].pools[i].presenter;t.state.activity.participants[a].reviewed.push({email:r.email,group:r.group,role:r.role})},a=!0,r=!1,o=void 0;try{for(var c,l=f()(n[e].pools[i].graders);!(a=(c=l.next()).done);a=!0){s(c.value)}}catch(t){r=!0,o=t}finally{try{!a&&l.return&&l.return()}finally{if(r)throw o}}}}function m(t){if(v>=r&&(v=0),t)do{""!=n[l].pools[v].presenter||u(c,"group",t.group)?!n[l].pools[v].graders.find(function(e){return e.group==t.group})&&n[l].pools[v].presenter.group!=t.group&&n[l].pools[v].graders.length<o-1?(n[l].pools[v].graders=n[l].pools[v].graders||[],n[l].pools[v].graders.push(t),p(l,v,t),t=null):(++v>=r&&(v=0),""!=n[l].pools[v].presenter||u(c,"group",t.group)?!n[l].pools[v].graders.find(function(e){return e.group==t.group})&&n[l].pools[v].presenter.group!=t.group&&n[l].pools[v].graders.length<o-1&&(n[l].pools[v].graders=n[l].pools[v].graders||[],n[l].pools[v].graders.push(t),p(l,v,t),t=null):(n[l].pools[v].presenter=t,c.push(t),p(l,v,t),h(l,v),t=null)):(n[l].pools[v].presenter=t,c.push(t),p(l,v,t),h(l,v),v++,t=null)}while(null!=t)}function g(t){for(;a.some(function(e){return t[e].length>0});){var e=!0,i=!1,s=void 0;try{for(var d,m=f()(a);!(e=(d=m.next()).done);e=!0){var g=d.value;y(t[g].shift())}}catch(t){i=!0,s=t}finally{try{!e&&m.return&&m.return()}finally{if(i)throw s}}}function y(t){var e=0;if(t)do{v>=r&&(v=0),""!=n[l].pools[v].presenter||u(c,"email",t.email)||u(n[l].pools[v].graders,"group",t.group)||n[l].pools[v].graders.reduce(function(t,e){return t.concat(e.reviewed.reduce(function(t,i){return i.group!=e.group?t.concat(i.group):t},[]))},[]).includes(t.group)?!n[l].pools[v].graders.find(function(e){return e.group==t.group})&&n[l].pools[v].presenter.group!=t.group&&!n[l].pools[v].graders.some(function(e){return e.reviewed.reduce(function(t,i){return i.group!=e.group?t.concat(i.group):t},[]).includes(t.reviewed[l-1].group)})&&!t.reviewed.filter(function(e){return e!=t.group}).includes(n[l].pools[v].presenter.group)&&n[l].pools[v].graders.length<o-1?(n[l].pools[v].graders.push(t),p(l,v,t),t=null):(++v>=r&&(v=0),""!=n[l].pools[v].presenter||u(c,"email",t.email)||u(n[l].pools[v].graders,"group",t.group)||n[l].pools[v].graders.reduce(function(t,e){return t.concat(e.reviewed.reduce(function(t,i){return i.group!=e.group?t.concat(i.group):t},[]))},[]).includes(t.group)?!n[l].pools[v].graders.find(function(e){return e.group==t.group})&&n[l].pools[v].presenter.group!=t.group&&!n[l].pools[v].graders.some(function(e){return e.reviewed.reduce(function(t,i){return i.group!=e.group?t.concat(i.group):t},[]).includes(t.reviewed[l-1].group)})&&!t.reviewed.filter(function(e){return e!=t.group}).includes(n[l].pools[v].presenter.group)&&n[l].pools[v].graders.length<o-1&&(n[l].pools[v].graders.push(t),p(l,v,t),t=null):(n[l].pools[v].presenter=t,c.push(t),p(l,v,t),h(l,v),v++,t=null)):(n[l].pools[v].presenter=t,c.push(t),p(l,v,t),h(l,v),v++,t=null),e>r&&(console.log("j'ai mal à mon code, enfin bcp plus mal, genre c'était possible ? ah ouais oaui WAI WE"),""==n[l].pools[v].presenter?(n[l].pools[v].presenter=t,c.push(t),p(l,v,t),h(l,v),t=null):n[l].pools[v].graders.length<o-1&&(n[l].pools[v].graders.push(t),p(l,v,t),t=null)),e++}while(null!=t)}}t.commit("setShifts",[]),t.state.activity.participants.map(function(t){return t.reviewed=[],t}),function(){for(console.log("getGroups"),console.log(i);a.some(function(t){return i[t].length>0});){var t=!0,e=!1,s=void 0;try{for(var r,n=f()(a);!(t=(r=n.next()).done);t=!0){var o=r.value;m(i[o].shift())}}catch(t){e=!0,s=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw s}}}}(),l++,v=0;var w=0;do{for(w++;c.length<s;)n.push({pools:new Array(r).fill().map(function(t){return{presenter:"",graders:[]}})}),g(i=d()),l++,v=0;c=[]}while(w<t.state.activity.sessions);console.log("shifts over"),console.log(n),t.commit("setShifts",n)}},getters:{},mutations:{setShifts:function(t,e){t.shifts=e},setIsAdmin:function(t,e){t.isAdmin=e},resetUserSession:function(t,e){t.userSession=e},setActivity:function(t,e){t.activity=e},setWithId:function(t,e){t.withId=e}}},Z={namespaced:!0,state:{activityId:0,activityUrlId:0,participants:[],errors:[]},actions:{setErrors:function(t,e){t.commit("setErrors",e)},getParticipants:function(t,e){h.a.get("http://localhost:5001/activity/"+e+"/participants").then(function(e){e.data.success&&t.commit("setParticipants",e.data.participants)})},setActivityId:function(t,e){t.commit("setActivityId",e)},setActivityUrlId:function(t,e){t.commit("setActivityUrlId",e)},setParticipants:function(t,e){t.commit("setParticipants",e)}},getters:{},mutations:{setErrors:function(t,e){t.errors=e},setActivityId:function(t,e){t.activityId=e},setActivityUrlId:function(t,e){t.activityUrlId=e},setParticipants:function(t,e){t.participants=e}}},tt={namespaced:!0,state:{review:{grader:{email:"",role:"",group:"",reviewed:[{urlId:"",name:"",role:"",graded:!1,group:"",skills:[{name:"",totalPossiblePoints:0,skillDescriptors:[{content:"",possiblePoints:0,acquired:!1}]}]}]},activityUrlId:"",urlId:"",reviewed:""},hasPushedSave:!1,hasReview:!1,showNotificationSave:!0},actions:{setShowNotificationSave:function(t,e){t.commit("setShowNotificationSave",e)},setHasReview:function(t,e){t.commit("setHasReview",e)},lookForReviewFromParticipant:function(t,e){return h.a.get("/api/activity/"+e.activityUrlId+"/review/grader/"+e.grader.email).then(function(e){e.data.hasReview?(console.log("getReviewFromParticipant"),t.commit("setReview",e.data.review),t.commit("setHasReview",!0),Q.push({path:"/activity/"+e.data.review.activityUrlId+"/review/"+e.data.review.urlId})):t.commit("setHasReview",!1)})},setHasPushedSave:function(t,e){t.commit("setHasPushedSave",e)},lookForReview:function(t,e){return h.a.get("/api/activity/"+e.activityUrlId+"/review/"+e.urlId).then(function(e){e.data.success&&(console.log("getReview"),console.log(e.data.review),t.dispatch("setReview",e.data.review))}).catch(function(t){console.log("error",t)})},setReview:function(t,e){var i=this;if(t.commit("setReview",e),t.state.hasPushedSave){if(!e.urlId)return h.a.post("/api/activity/"+e.activityUrlId+"/review",{review:e}).then(function(e){e.data.success&&(t.commit("setReview",e.data.review),t.dispatch("setHasPushedSave",!1),t.state.showNotificationSave&&(i._vm.$notify({group:"notifications",title:"Review saved",text:"Review is saved nice and smooth",type:"success"}),t.dispatch("setShowNotificationSave",!0)),Q.push({path:"/activity/"+e.data.review.activityUrlId+"/review/"+e.data.review.urlId}))});h.a.put("/api/activity/"+e.activityUrlId+"/review/"+e.urlId,{review:e}).then(function(e){t.dispatch("setHasPushedSave",!1),t.commit("setReview",e.data.review),e.data.success&&i._vm.$notify({group:"notifications",title:"Review updated",text:"This review have been updated with success.",type:"success"})})}},resetReview:function(t,e){t.dispatch("setReview",{grader:{email:"",role:"",group:"",reviewed:[{urlId:"",name:"",role:"",graded:!1,group:"",skills:[{name:"",totalPossiblePoints:0,skillDescriptors:[{content:"",possiblePoints:0,acquired:!1}]}]}]},activityUrlId:"",urlId:"",reviewed:""})}},getters:{},mutations:{setShowNotificationSave:function(t,e){t.showNotificationSave=e},setHasReview:function(t,e){t.hasReview=e},setHasPushedSave:function(t,e){t.hasPushedSave=e},setReview:function(t,e){t.review=e}}};s.default.use(n.a),s.default.use(d.a);var et=new n.a.Store({modules:{activity:J,participants:Z,review:tt}}),it=i("CLX7"),st=i.n(it);s.default.config.productionTip=!1,s.default.use(st.a),new s.default({el:"#app",router:Q,store:et,components:{App:u},template:"<App/>"})},PSlP:function(t,e){},QRvs:function(t,e){},bC41:function(t,e){},bDVA:function(t,e){},ejvi:function(t,e){},u3z8:function(t,e){},uySj:function(t,e){},xPQp:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.4edb58d9d61d8bf2d9d1.js.map